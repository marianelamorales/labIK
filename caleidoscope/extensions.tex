%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Extensions}\label{sec:ext}

The main goal of this section is to generate stronger logics adding new axioms to our system. We say \emph{stronger logic} to refer to the fact that we are restricting the class of frames we want to consider, imposing some restrictions on the accessibility relation. 

In~\cite{simpson:phd}, Simpson extends his basic sequent system for $\IK$ to the geometric frame conditions. 
\sonia{Not fully. The system is extended with a rule for geometric frame conditions, but the completeness holds only for the restricted class of Horn clauses frame conditions.}
%
For example, you can add the following rule:
$$\scalebox{.9}{$\vlinf{\boxbrn{4}}{\text{\footnotesize $u'$ fresh}}{\B, \accs wv, \accs vu, \Left \SEQ \Right}{\B, \accs wv, \accs vu, \accs wu, \Left \SEQ \Right}$}$$
to it and obtain a sound and complete system wrt.~$\IK$ plus the axiom
$\ax{4}\colon \fm{(\DIA\DIA A \IMP \DIA A) \AND (\BOX A \IMP \BOX\BOX A)}$, that is, wrt.~to all frames in which $\rel$ is transitive.

In~\cite{plotkin:stirling:86}, Plotkin and Stirling give a more general correspondence result than Theorem~\ref{thm:plotkin}, that is, for intuitionistic modal logic extended with a family of axioms wrt.~some classes of bi-relational frames.
%
For example, the frames that validate the axiom $\rn{4}_\rn\DIA \colon \fm{\DIA\DIA A \IMP \DIA A}$ are exactly the ones satisfying the condition:
%\begin{center}
	($\diabrn{4}$) if $\accs wv$ and $\accs vu$, there exists a $\lb{u'}\in W$ s.t.~$\futs{u}{u'}$ and $\accs{w}{u'}$.
%\end{center}

Incorporating the preorder symbol into the syntax of our sequents allows us to also obtain a sound and complete proof system for the intuitionistic modal logic extended with axiom $\rn{4}_\rn\DIA$, by designing the following rule:
$$\scalebox{.9}{$\vlinf{\diabrn{4}}{\text{\footnotesize $u'$ fresh}}{\B, \accs wv, \accs vu, \Left \SEQ \Right}{\B, \accs wv, \accs vu, \futs{u}{u'}, \accs{w}{u'} , \Left \SEQ \Right}$}$$


Therefore, we decompose further the formalism of labelled sequents and extend the reach of labelled deduction to the logics studied in~\cite{plotkin:stirling:86}.
%
These systems enjoy cut-elimination via usual arguments. 

%Proofs of the axiom mentioned for $\DIA$ and $\BOX$ are below:
%
%Proof of $\ax{4_{\BOX}} \colon \fm{\BOX A \IMP \BOX\BOX A}$
%
%$\vlderivation{
%	\vlin{\rlabrn\IMP}{}{\labels{x}{\BOX A \IMP \BOX\BOX A}}{	
%		\vliq{\rlabrn\BOX}{}{x \le w, \labels{w}{\BOX A} \SEQ \labels{w}{\BOX\BOX A}}{
%			\vlin{\rn{F_1}}{}{x \le w, w \le w', {w' \rel v}, {v \le v'}, v' \rel u, \labels{w}{\BOX A} \SEQ \labels{u}{A}}{
%				\vlin{\boxbrn{4}}{}{x \le w, w \le w', {w' \rel v}, {v \le v'}, v' \rel u, w' \le t, t \rel v', \labels{w}{\BOX A} \SEQ \labels{u}{A}}{
%					\vlin{\rn{trans}}{}{x \le w, w \le w', {w' \rel v}, {v \le v'}, v' \rel u, w' \le t, t \rel v', t \le t', t' \rel u, \labels{w}{\BOX A} \SEQ \labels{u}{A}}{
%						\vlin{\llabrn\BOX}{}{x \le w, w \le w', w' \rel v, v \le v', v' \rel u, w' \le t, t \rel v', t \le t', t' \rel u, w \le t, \labels{w}{\BOX A} \SEQ \labels{u}{A}}{
%							\vlin{\labrn{id}}{}{x \le w, w \le w', w' \rel v, v \le v', v' \rel u, w' \le t, t \rel v', w \le t, t \rel u, \labels{w}{\BOX A}, \labels{u}{\A} \SEQ \labels{u}{A}}{
%								\vlhy{}
%							}
%						}
%					}
%				}
%			}
%		}
%	}
%}
%$
%
%Proof of $\ax{4_{\DIA}} \colon \DIA\DIA A \IMP \DIA A$:
%
%$\vlderivation{
%	\vlin{\rlabrn\IMP}{}{\labels{x}{\DIA\DIA A \IMP \DIA A}}{
%		\vliq{\llabrn\DIA}{}{\futs xw, \labels{w}{\DIA\DIA A} \SEQ \labels{w}{\DIA A}}{
%			\vlin{\diasym_\rn{4}}{}{\futs xw, \accs wv, \accs vu, \labels{u}{A} \SEQ \labels{w}{\DIA A}}{
%				\vlin{\rlabrn\DIA}{}{\futs xw, \accs wv, \accs vu, \futs{u}{u'}, \accs{w}{u'},  \labels{u}{A} \SEQ \labels{w}{\DIA A}}{
%					\vlin{\labrn{id}}{}{\futs xw, \accs wv, \accs vu, \futs{u}{u'}, \accs{w}{u'},  \labels{u}{A} \SEQ \labels{w}{\DIA A}, \labels{u'}{A}}{
%						\vlhy{}
%					}
%				}
%			}
%		}
%	}
%}
%$


Now we want to obtain a sound and complete proof system for the intuitionistic modal logic extended with axiom $\agklmn$ (also known as $\mathsf{Scott-Lemmon}$ $\mathsf{axiom}$): $\fm{\DIA^{k} \BOX^{l} A \IMP \BOX^{m}\DIA^{n} A}$. %(Figure \ref{fig:gklmn}).\todo{Wrong label. why??}\sonia{?}

\todo{
	\begin{theorem}[\cite{plotkin:stirling:86}]
	An intuitionistic modal frame $\langle W, \rel, \le \rangle$ validates $\DIA^k\BOX^l A \IMP \BOX^m\DIA^n A$ if and only if the frame satisfies:
	
	if $\lb w R^{k} \lb u$ and $\lb w R^{m} \lb v$ then there exists $\lb{u'}$ such that $\futs{u}{u'}$ and there exists $\lb x$ such that $\lb{u'}R^{l}\lb x$ and $\lb v R^{n} \lb x$.
\end{theorem}
}

\sonia{I don't think we need the actual \emph{correspondence} result. Soundness and completeness is enough for us}.


Writing this axiom in both classical and intuitionistic logic in first-order language, we obtain:

$\star$ \emph{Classical case} \hspace{2.2mm} $\rightsquigarrow$ \hspace{3.7mm}$\forall x,y,z ( xR^{k}y \vlan xR^{m}z \rightarrow \exists u yR^{l}u \vlan zR^{n}u)$ 

$\star$ \emph{Intuitionistic case} $\rightsquigarrow$  $\forall x,y,z((xR^{k}y \vlan xR^{m}z) \IMP \exists y' (y \le y' \vlan \exists u (y'R^{l}u \vlan zR^{n} u)))$\\

\sonia{in the intuitionistic case, with the $\le$ proposition, the formula is geometric.}

\begin{figure}
		$$
		\xymatrix{
			& u' \ar@{.>}[ddr]^{R^l} \\
			& u \ar@{.>}[u]^{\le} \\
			w \ar@{->}[ur]^{R^k}\ar@{->}[dr]_{R^m} && x \\
			& v \ar@{.>}[ur]_{R^n}
		}
		$$
	\label{fig:gklmn}
	\caption{}
\end{figure}

Following the idea to have a sound and complete system adding the axiom $\agklmn$ to the system $\labIKp$, we introduce the next rule:

\bigskip

\begin{center}
	$\vlderivation { \vlin {\gklmn}{y', u \mbox{ fresh}}{\B, \lb x R^{k} \lb y, \lb x R^{m} \lb z, \Left \Rightarrow \Right}{\vlhy {\B, \futs{y}{y'}, \lb x R^{k} \lb y, \lb x R^{m} \lb z, \lb{y'}R^{l} \lb u, \lb z R^{n} \lb u, \Left\Rightarrow \Right}}}$
\end{center}

\bigskip

%We start proving that our new system is complete with the base case of $\mathsf{k = l = m = n = 1}$:
%
%\begin{theorem}
%	The system $\labIKp +\agklmn$ is complete for $\mathsf{k = l = m = n = 1}$.
%\end{theorem}
%
%\begin{proof}
%		\begin{smallequation*}
%			\vlderivation {\vlin {\rlabrn{\IMP}}{y \mbox{ fresh}}{\SEQ \labels{x}{\DIA \BOX A \IMP \BOX \DIA A}}{
%					\vlin {\rlabrn{\BOX}}{z, w \mbox{ fresh} }{\lseq{\futs xy}{\labels{y}{\DIA \BOX A}}{\labels{y}{\BOX \DIA A}}}{
%						\vlin {\llabrn{\DIA}}{u \mbox{ fresh}}{\lseq{\futs xy, \futs yz, \accs zw}{\labels{y}{\DIA \BOX A}}{\labels{w}{\DIA A}}}{
%							\vlin {\rn{F_2}}{t \mbox{ fresh}}{\lseq{\futs xy, \futs yz, \accs zw, \accs yu}{\labels{u}{\BOX A}}{\labels{w}{\DIA A}}}{
%								\vlin {\gklmn}{t', j \mbox{ fresh}}{\lseq{\futs xy, \futs yz, \futs ut, \accs zw, \accs yu, \accs zt}{\labels{u}{\BOX A}}{\labels{w}{\DIA A}}}{
%									\vlin {\rlabrn{\DIA}}{}{\lseq{\futs xy, \futs yz, \futs ut, \futs{t}{t'}, \accs zw, \accs yu, \accs zt, \accs{t'}{j}, \accs wj}{\labels{u}{\BOX A}}{\labels{w}{\DIA A}}}{
%										\vlin {\rn{trans}}{}{\lseq{\futs xy, \futs yz, \futs ut, \futs{t}{t'}, \accs zw, \accs yu, \accs zt, \accs{t'}{j}, \accs wj}{\labels{u}{\BOX A}}{\labels{w}{\DIA A}, \labels{j}{A}}}{
%											\vlin {\llabrn{\BOX}}{}{\lseq{\futs xy, \futs yz, \futs ut, \futs{t}{t'}, \futs{u}{t'}, \accs zw, \accs yu, \accs zt, \accs{t'}{j}, \accs wj}{\labels{u}{\BOX A}}{\labels{w}{\DIA A}, \labels{j}{A}}}{
%												\vlin {\rn{refl}}{}{\lseq{\futs xy, \futs yz, \futs ut, \futs{t}{t'}, \futs{u}{t'}, \accs zw, \accs yu, \accs zt, \accs{t'}{j}, \accs wj}{\labels{u}{\BOX A}, \labels{j}{A}}{\labels{w}{\DIA A}, \labels{j}{A}}}{
%													\vlin {\rn{id}}{}{\lseq{\futs xy, \futs yz, \futs ut, \futs{t}{t'}, \futs{u}{t'},\futs jj, \accs zw, \accs yu, \accs zt, \accs{t'}{j}, \accs wj}{\labels{u}{\BOX A}, \labels{j}{A}}{\labels{w}{\DIA A}, \labels{j}{A}}}
%													{\vlhy {}}}}}}}}}}}}
%		\end{smallequation*}
%\end{proof}
%
%\begin{smallequation*}
%	\vlderivation {
%		\vlin {\rlabrn{\IMP}}{\futs{x}{x'}}{\SEQ \labels{x}{\DIA \BOX A \IMP \BOX \DIA A}}{
%			\vlin {\rlabrn{\BOX}}{\futs{x'}{x''}, \accs{x''}{y''}}{\labels{x'}{\DIA \BOX A} \SEQ\labels{x'}{\BOX \DIA A}}{
%				\vlin {\llabrn{\DIA}}{\accs{x'}{z'}}{\labels{x'}{\DIA \BOX A}\SEQ\labels{y''}{\DIA A}}{
%					\vlin {\rn{F_2}}{\futs{z'}{z''}, \accs{x''}{z''}}{\labels{z'}{\BOX A}\SEQ\labels{y''}{\DIA A}}{
%						\vlin {\gklmn}{\futs{z''}{z'''}, \accs{z'''}{w''}, \accs{y''}{w''}}{\labels{z'}{\BOX A}\SEQ\labels{y''}{\DIA A}}{
%							\vlin {\rlabrn{\DIA}}{}{\labels{z'}{\BOX A}\SEQ\labels{y''}{\DIA A}}{
%								\vlin {\rn{trans}+\rn{refl}}{\futs{z'}{z'''},\futs{w''}{w''}}{\labels{z'}{\BOX A}\SEQ\labels{y''}{\DIA A}, \labels{w''}{A}}{
%									\vlin {\llabrn{\BOX}}{}{\labels{z'}{\BOX A}\SEQ\labels{y''}{\DIA A}, \labels{w''}{A}}{
%										\vlin {\rn{id}}{}{\labels{z'}{\BOX A}, \labels{w''}{A}\SEQ\labels{y''}{\DIA A}, \labels{w''}{A}}{
%											\vlhy {}}}}}}}}}}}
%\end{smallequation*}

\begin{theorem}\label{thm:compl-gklmn}
	For any formula $\fm A$. If $\fm A$ is a theorem of $\IK + \DIA^k\BOX^l A \IMP \BOX^m\DIA^n A$, then $A$ is a theorem of $\labIKp + \gklmn + \rn{cut}$.
\end{theorem}

\begin{proof} Same as Thm.~\ref{thm:completeness} with the additional derivation of $\DIA^k\BOX^l A \IMP \BOX^m\DIA^n A$.
		\begin{smallequation*}
			\vlderivation{
				\vlin{\rlabrn\IMP}{\futs{x}{x_0}}{\SEQ \labels{x}{\DIA^k\BOX^l A \IMP \BOX^m\DIA^n A}}{
					\vliq{\rlabrn\BOX}{\{\futs{x_i}{x_i'}, \accs{x_i'}{x_{i+1}}\}_{0\le i \le m-1}}{\labels{x_0}{\DIA^k\BOX^lA} \SEQ \labels{x_0}{\BOX^m\DIA^n A}}{
						\vliq{\rn{F_1}}{\futs{x_{m-2}'}{x_{m-2}''}, \accs{x_{m-2}''}{x_{m-1}'},\{\futs{x_i'}{x_i''},\accs{x_i''}{x_{i+1}''}\}_{0\le i \le m-2}}{\labels{x_0}{\DIA^k\BOX^l A} \SEQ \labels{x_m}{\DIA^n A}}{
							\vliq{\llabrn\DIA}{\accs{x_0}{y_1}, \{\accs{y_j}{y_{j+1}}\}_{1\le j \le k-1}}{\labels{x_0}{\DIA^k\BOX^l A} \SEQ \labels{x_m}{\DIA^n A}}{
								\vliq{\rn{F_2}}{\accs{x_0''}{y_1'},\{\accs{y_{j}'}{y_{j+1}'}\}_{1\le j \le k-1}}{\labels{y_k}{\BOX^l A}\SEQ\labels{x_m}{\DIA^n A}}{
									\vlin {\gklmn}{\futs{y_k'}{y_k''},\lb{y_k''}R^l\lb{w}, \lb{x_m}R^n\lb{w}}{\labels{y_k}{\BOX^l A}\SEQ\labels{x_m}{\DIA^n A}}{
										\vliq {\rlabrn{\DIA}}{}{\labels{y_k}{\BOX^l A}\SEQ\labels{x_m}{\DIA^n A}}{
											\vlin {\rn{trans}+\rn{refl}}{\futs{y_k}{y_k''}, \ldots, \futs{w}{w}}{\labels{y_k}{\BOX^l A}\SEQ\labels{x_m}{\DIA^n A},\labels{w}{A}}{
												\vliq {\llabrn{\BOX}}{}{\labels{y_k}{\BOX^l A}\SEQ\labels{x_m}{\DIA^n A},\labels{w}{A}}{
													\vlin {\rn{id}}{}{\labels{y_k}{\BOX^l A},\labels{w}{A}\SEQ\labels{x_m}{\DIA^n A},\labels{w}{A}}{
														\vlhy{}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
		\end{smallequation*}
\end{proof}

\begin{theorem}\label{thm:cut-elim-gklmn}
	The rule $\rn{cut}$ is admissible for $\labIKp + \gklmn$.
\end{theorem}

\begin{proof}
Straightforward as the $\gklmn$ rule only manipulates the relational context.
\end{proof}

\begin{theorem}\label{thm:sound-gklmn}
	For any formula $A$. If $A$ is provable in $\labIKp$, then it is valid in every birelational frame satisfying the intuitionistic $klmn$-incestuality condition.
\end{theorem}

\begin{proof}
	\todo{}
\end{proof}

%In order to have a completeness proof for the general case, we need to introduce the rules from the Lemma~\ref{lemma:admis}.
%
%\begin{lemma}\label{lemma:admis} The following rules are derivable in $\labIKp$:
%	\todo{notation $\le \circ R$ etc. needs to be defined}
%	\begin{enumerate}
%		\item{$\vlderivation {\vlin {\boxlk}{}{\B, \Left, x(\le \circ $R$)^{k}y, \labels{x}{\BOX^{k} A}\Rightarrow \Right}{\vlhy {\B, \Left, x(\le \circ $R$)^{k}y, \labels{x}{\BOX^{k} A}, \labels{z}{A} \Rightarrow \Right}}}$}
%		\item{$\vlderivation{\vlin {\boxk}{}{\B, \Left \Rightarrow \Right, \labels{x}{\BOX^{k} A}}{\vlhy {\B, x(\le \circ $R$)^{k}y,\Left \Rightarrow \Right, \labels{y}{A}}}}$}
%		\item{$\vlderivation { \vlin {\diamk}{}{\B, \Left, \labels{x}{\DIA^{k} A} \Rightarrow \Right}{\vlhy {\B, xR^{k}y, \Left, \labels{y}{A} \Rightarrow \Right}}}$ }
%		\item{$\vlderivation { \vlin {\diamrk}{}{\B, \Left, xR^{k}y \Rightarrow \Right, \labels{x}{\DIA^{k}A}}{\vlhy {\B, \Left, xR^{k}y \Rightarrow \Right, \labels{x}{\DIA^{k}A}, \labels{y}{A}}}}$}
%	\end{enumerate}
%\end{lemma}
%
%\def\lef#1{#1}
%\def\rig#1{#1^{\circ}}
%\newcommand{\wbri}[2]{[\strut^{#1} #2]}

		\begin{smallequation*}\hspace*{-1.5cm}
			\vlderivation{
				\vlin{\rlabrn\IMP,\llabrn\AND}{}{\SEQ \labels{x}{(\DIA(\BOX(a \OR b) \AND \DIA a) \AND \DIA(\BOX(a \OR b) \AND \DIA b)) \IMP \DIA(\DIA a \AND \DIA b)}}{
					\vlin{\llabrn\DIA, \llabrn\AND,\llabrn\DIA}{xRy,yRu,xRz,zRv}{\labels{x}{\DIA(\BOX(a \OR b) \AND \DIA a)}, \labels{x}{\DIA(\BOX(a \OR b) \AND \DIA b)} \SEQ \labels{x}{\DIA(\DIA a \AND \DIA b)}}{
						\vlin{g 1111}{yRw,zRw}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b} \SEQ \labels{x}{\DIA(\DIA a \AND \DIA b)}}{
							\vliin{\llabrn\BOX, \llabrn\OR}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b} \SEQ \labels{x}{\DIA(\DIA a \AND \DIA b)}}{
%								\vlhtr{\pi_2}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{b} \SEQ \labels{x}{\DIA(\DIA a \AND \DIA b)}}									
									\vliin{\rlabrn\DIA,\rlabrn\AND}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{w}{b} \SEQ \labels{x}{\DIA(\DIA a \AND \DIA b)}}{
										\vlin{\rlabrn\DIA}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{w}{b} \SEQ \labels{y}{\DIA a}}{
											\vlin{\rn{id}}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{w}{b} \SEQ \labels{u}{a}}{
												\vlhy{}
											}
										}
									}{
									\vlin{\rlabrn\DIA}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{w}{b} \SEQ \labels{y}{\DIA b}}{
										\vlin{\rn{id}}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{w}{b} \SEQ \labels{w}{b}}{
											\vlhy{}
										}
									}
								}
							}{								
%								\vlhtr{\pi_1}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{x}{\DIA(\DIA a \AND \DIA b)}}
								\vliin{\rlabrn\DIA,\rlabrn\AND}{}{\labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{x}{\DIA(\DIA a \AND \DIA b)}}{
									\vlin{\rlabrn\DIA}{}{\labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{z}{\DIA a}}{
										\vlin{\rn{id}}{}{\labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{w}{a}}{
											\vlhy{}
											}
										}
									}{
									\vlin{\rlabrn\DIA}{}{\labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{z}{\DIA b}}{
										\vlin{\rn{id}}{}{\labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{v}{b}}{
											\vlhy{}
											}
										}
									}
								}
						}
					}
				}
			}
		\end{smallequation*}
	
%		\begin{smallequation*}
%			\pi_1 \quad=\quad
%			\vlderivation{
%				\vliin{\rlabrn\DIA,\rlabrn\AND}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{x}{\DIA(\DIA a \AND \DIA b)}}{
%					\vlin{\rlabrn\DIA}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{z}{\DIA a}}{
%						\vlin{\rn{id}}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{w}{a}}{
%							\vlhy{}
%							}
%						}
%					}{
%					\vlin{\rlabrn\DIA}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{z}{\DIA b}}{
%						\vlin{\rn{id}}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b}, \labels{w}{a} \SEQ \labels{v}{b}}{
%							\vlhy{}
%							}
%						}
%					}
%				}
%		\end{smallequation*}
	
%		\begin{smallequation*}
%			\pi_2 \quad=\quad 		
%			\vlderivation{
%				\vliin{\rlabrn\DIA,\rlabrn\AND}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{w}{b}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b} \SEQ \labels{x}{\DIA(\DIA a \AND \DIA b)}}{
%					\vlin{\rlabrn\DIA}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{w}{b}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b} \SEQ \labels{y}{\DIA a}}{
%						\vlin{\rn{id}}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{w}{b}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b} \SEQ \labels{u}{a}}{
%							\vlhy{}
%							}
%						}
%					}{
%					\vlin{\rlabrn\DIA}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{w}{b}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b} \SEQ \labels{y}{\DIA b}}{
%						\vlin{id}{}{\labels{y}{\BOX(a \OR b)}, \labels{u}{a}, \labels{w}{b}, \labels{z}{\BOX(a \OR b)}, \labels{v}{b} \SEQ \labels{w}{b}}{
%							\vlhy{}
%							}
%						}
%					}
%				}
%	\end{smallequation*}


\begin{equation*}
\xymatrix{
	& \lb{z''} \ar@{->}[rrdd]^R \\
	& \lb{z'} \ar@{.>}[u]^{\le} \ar@{->}[rd]^{R}\\
	\lb{x'} \ar@{->}[rd]_R\ar@{->}[ru]^R  & \lb{y''} \ar@{->}[r]_R & \lb{u''} & \lb{v''}\\
	& \lb{y'} \ar@{.>}[u]_{\le} \ar@{->}[rru]_R \\
	\lb{x} \ar@{.>}[uu]^{\le}
}
\end{equation*}

{\small
	\begin{equation*}%\hspace*{-1.7cm}
		\vlderivation{
			\vlin{\rlabrn\IMP,\llabrn\AND}{x\le x'}{\SEQ\labels{x}{(\DIA(\BOX(a \OR b) \AND \DIA a) \AND \DIA(\BOX(a \OR b) \AND \DIA b)) \IMP \DIA(\DIA a \AND \DIA b)}}{
				\vlin{\llabrn\DIA, \llabrn\AND, \rlabrn\DIA}{x'Ry'}{\labels{x'}{\DIA(\BOX(a \OR b) \AND \DIA a)}, \labels{x'}{\DIA(\BOX(a \OR b) \AND \DIA b)} \SEQ \labels{x'}{\DIA(\DIA a \AND \DIA b)}}{
					\vlin{\rlabrn\AND+\rn{id}}{}{\labels{y'}{\BOX(a \OR b)}, \labels{y'}{\DIA a}, \labels{x'}{\DIA(\BOX(a \OR b) \AND \DIA b)} \SEQ \labels{x'}{\DIA(\DIA a \AND \DIA b)}, \labels{y'}{\DIA a \AND \DIA b}}{
%						\vlin{\rn{id}}{}{\labels{y'}{\DIA a} \SEQ \labels{y'}{\DIA a}}{
%							\vlhy{}
%						}
%					}{
					\vlin{\llabrn\DIA, \llabrn\AND, \rlabrn\DIA}{x'Rz'}{\labels{y'}{\BOX(a \OR b)}, \labels{y'}{\DIA a}, \labels{x'}{\DIA(\BOX(a \OR b) \AND \DIA b)} \SEQ \labels{x'}{\DIA(\DIA a \AND \DIA b)}, \labels{y'}{\DIA b}}{
						\vlin{\rlabrn\AND+\rn{id}}{}{\labels{y'}{\BOX(a \OR b)}, \labels{y'}{\DIA a}, \labels{z'}{\BOX(a \OR b)}, \labels{z'}{\DIA b} \SEQ \labels{x'}{\DIA(\DIA a \AND \DIA b)}, \labels{y'}{\DIA b}, \labels{z'}{\DIA a \AND \DIA b}}{
							\vlin{g1111,\llabrn\BOX,\rlabrn\DIA}{y'\le y'', y''Ru'', z'Ru''}{\labels{y'}{\BOX(a \OR b)}, \labels{y'}{\DIA a}, \labels{z'}{\BOX(a \OR b)}, \labels{z'}{\DIA b} \SEQ \labels{x'}{\DIA(\DIA a \AND \DIA b)}, \labels{y'}{\DIA b}, \labels{z'}{\DIA a}}{
								\vlin{\llabrn\OR+\rn{id}}{}{\labels{y'}{\BOX(a \OR b)}, \labels{u''}{a \OR b}, \labels{y'}{\DIA a}, \labels{z'}{\BOX(a \OR b)}, \labels{z'}{\DIA b} \SEQ \labels{x'}{\DIA(\DIA a \AND \DIA b)}, \labels{y'}{\DIA b}, \labels{z'}{\DIA a}, \labels{u''}{a}}{
%										\vlin{\rn{id}}{}{\labels{u''}{a} \SEQ \labels{u''}{a}}{
%											\vlhy{}
%											}
%										}{
									\vlin{g1111,\llabrn\BOX,\rlabrn\DIA}{z'\le z'', z''Rv'', y'Rv''}{\labels{y'}{\BOX(a \OR b)}, \labels{u''}{b}, \labels{y'}{\DIA a}, \labels{z'}{\BOX(a \OR b)}, \labels{z'}{\DIA b} \SEQ \labels{x'}{\DIA(\DIA a \AND \DIA b)}, \labels{y'}{\DIA b}, \labels{z'}{\DIA a}, \labels{u''}{a}}{
										\vlin{\llabrn\OR+\rn{id}}{}{\labels{y'}{\BOX(a \OR b)}, \labels{u''}{b}, \labels{y'}{\DIA a}, \labels{z'}{\BOX(a \OR b)}, \labels{v''}{a \OR b}, \labels{z'}{\DIA b} \SEQ \labels{x'}{\DIA(\DIA a \AND \DIA b)}, \labels{y'}{\DIA b}, \labels{v''}{b}, \labels{z'}{\DIA a}, \labels{u''}{a}}{
											\vlid{}{}{\labels{y'}{\BOX(a \OR b)}, \labels{u''}{b}, \labels{y'}{\DIA a}, \labels{z'}{\BOX(a \OR b)}, \labels{v''}{a}, \labels{z'}{\DIA b} \SEQ \labels{x'}{\DIA(\DIA a \AND \DIA b)}, \labels{y'}{\DIA b}, \labels{v''}{b}, \labels{z'}{\DIA a}, \labels{u''}{a}}{
												\vlhy{}
												}
											}
										}
									}
								}
%							}{
%							\vlin{\rn{id}}{}{\labels{z'}{\DIA b} \SEQ \labels{z'}{\DIA b}}{
%								\vlhy{}		
%								}
							}
						}
					}
				}
			}
		}
	\end{equation*}
}

\todo{For path axioms we must have that adding the rule for the two sides of the axiom is equivalent to adding the rule that doesn't make use of the pre-order. Is it possible to see that directly on the proof theoretical side?}
\sonia{probably not because the preorder is introduced/used in other rules for $\BOX$ and $\IMP$}