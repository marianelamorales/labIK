%%%%%%%%%%%%%%%%k1%%%%%%%%%%%%%
\newcommand{\kone}{
	\begin{center}
			$\vlderivation{
				\vlin{\rlabrn{\IMP}}
				{y$ fresh$}
				{\Rightarrow \labels{x}{\BOX (A \IMP B) \IMP (\BOX A \IMP \BOX B)}}
				{\vlin {\rlabrn{\IMP}}
					{z$ fresh$}
					{x \le y, \labels{y}{\BOX(A \IMP B)} \Rightarrow \labels{y}{\BOX A \IMP \BOX B}}
					{\vlin {\rlabrn{\BOX}}
						{w, u$ fresh$}
						{x \le y,y \le z, \labels{y}{\BOX(A \IMP B)}, \labels{z}{\BOX A} \Rightarrow \labels{z}{\BOX B}}
						{\vlin {\llabrn{\BOX}}
							{}
							{x \le y,y \le z, z \le w, wRu, \labels{y}{\BOX(A \IMP B)}, \labels{z}{\BOX A} \Rightarrow \labels{u}{B}}
							{\vlin {\color{red}\rn{trans}}
								{}
								{x \le y,y \le z, z \le w, wRu, \labels{y}{\BOX(A \IMP B)}, \labels{z}{\BOX A}, \labels{u}{A} \Rightarrow \labels{u}{B}}
								{\vlin {\llabrn{\BOX}}
									{}
									{x \le y,y \le z, z \le w, y \le w, wRu, \labels{y}{\BOX(A \IMP B)}, \labels{z}{\BOX A}, \labels{u}{A} \Rightarrow \labels{u}{B}}
									{\vlin {\color{red}\rn{refl}}
										{}
										{x \le y,y \le z, z \le w, y \le w, wRu, \labels{y}{\BOX(A \IMP B)}, \labels{z}{\BOX A}, \labels{u}{A}, \labels{u}{A \IMP B} \Rightarrow \labels{u}{B}}
										{\vliin{\llabrn{\IMP}}
											{}
											{x \le y,y \le z, z \le w, y \le w, u \le u, wRu, \labels{y}{\BOX(A \IMP B)}, \labels{z}{\BOX A}, \labels{u}{A}, \labels{u}{A \IMP B} \Rightarrow \labels{u}{B}}
											{\vlhy{\circledast \hspace{75mm}}}
											{\vlhy{\star}}}}}}}}}
			}$
	\end{center}
	
	
The derivation continues after the application of the rule $\llabrn{\IMP}$ as follows. One of the premises:
	\begin{center}
	\scalebox{0.95}{
	$\vlderivation{
		\vlin{\llabrn{\IMP}}
		{}
		{\circledast}
		{\vlin {\rn{id}}
			{}
			{x \le y,y \le z, z \le w, y \le w, u \le u, wRu, \labels{y}{\BOX(A \IMP B)}, \labels{z}{\BOX A}, \labels{u}{A}, \labels{u}{A \IMP B} \Rightarrow \labels{u}{B}, \labels{u}{A}}
			{\vlhy {}}}
	}$}
	\end{center}
	And the other premise that allows us to conclude the derivation of $\kax[1]$:
	
	\begin{center}
	\scalebox{0.95}{
	$\vlderivation{
		\vlin{\llabrn{\IMP}}
		{}
		{\star}
		{\vlin {\rn{id}}
			{}
			{x \le y,y \le z, z \le w, y \le w, u \le u, wRu, \labels{y}{\BOX(A \IMP B)}, \labels{z}{\BOX A}, \labels{u}{A}, \labels{u}{A \IMP B}, \labels{u}{B} \Rightarrow \labels{u}{B}}
			{\vlhy {}}}
	}$}
\end{center}}


%%%%%%%%%%%%%%%%%%%k2%%%%%%%%%%%%%%%%%
%k2 Macro
\newcommand{\ktwo}{\begin{center}
		$\vlderivation {
			\vlin{\rlabrn{\IMP}}
			{y$ fresh$}
			{ \Rightarrow \labels{x}{\BOX (A \IMP B) \IMP (\DIA A \IMP \DIA B)}}
			{\vlin {\rlabrn{\IMP}}
				{z$ fresh$}
				{ x \le y, \labels{y}{\BOX (A \IMP B)} \Rightarrow \labels{y}{(\DIA A \IMP \DIA B)}}
				{\vlin {\llabrn{\DIA}}
					{u$ fresh$}
					{x \le y, y \le z, \labels{y}{\BOX (A \IMP B)}, \labels{z}{\DIA A} \Rightarrow \labels{z}{\DIA B}}
					{\vlin{\rlabrn{\DIA}}
						{}
						{x \le y, y \le z, zRu, \labels{y}{\BOX (A \IMP B)}, \labels{u}{A} \Rightarrow \labels{z}{\DIA B}}
						{\vlin {\llabrn{\BOX}}
							{}
							{x \le y, y \le z, zRu, \labels{y}{\BOX (A \IMP B)}, \labels{u}{A} \Rightarrow \labels{z}{\DIA B}, \labels{u}{B}}
							{\vlin {\color{red}\rn{refl}}
								{}
								{x \le y, y \le z, zRu, \labels{y}{\BOX (A \IMP B)}, \labels{u}{A}, \labels{u}{A \IMP B} \Rightarrow \labels{z}{\DIA B}, \labels{u}{B}}
								{\vliin{\llabrn{\IMP}}
									{}
									{x \le y, y \le z, zRu, u\le u, \labels{y}{\BOX (A \IMP B)}, \labels{u}{A}, \labels{u}{A \IMP B} \Rightarrow \labels{z}{\DIA B}, \labels{u}{B}}
									{\vlhy{\circledast \hspace{75mm}}}
									{\vlhy{\star}}								}}}}}}
		}$
	\end{center}
	
	The derivation of $\kax[2]$ continues with two premises as a result of applying the rule $\llabrn{\IMP}$.
	
	In $\circledast$, the derivation continues as follows:
	
	\begin{center}
		$\vlderivation{
			\vlin{\llabrn{\IMP}}
			{}
			{\circledast}
			{\vlin {\rn{id}}
				{}
				{x \le y, y \le z, zRu, u \le u, \labels{y}{\BOX (A \IMP B)}, \labels{u}{A}, \labels{u}{A \IMP B} \Rightarrow \labels{z}{\DIA B}, \labels{u}{B}, \labels{u}{A}}
				{\vlhy {}}}
		}$
	\end{center}
	
	And in order to obtain the whole proof for $\kax[2]$, in $\star$, we conclude the proof as it is shown in the following:

	\begin{center}
		$\vlderivation{
			\vlin{\llabrn{\IMP}}
			{}
			{\star}
			{\vlin {\rn{id}}
				{}
				{x \le y, y \le z, zRu, u \le u, \labels{y}{\BOX (A \IMP B)}, \labels{u}{A}, \labels{u}{A \IMP B}, \labels{u}{B} \Rightarrow \labels{z}{\DIA B}, \labels{u}{B}}
				{\vlhy {}}}
		}$
	\end{center}
}


%%%%%%%%%%%%%k4%%%%%%%%%%%%%%%%%%%%
\newcommand{\kfour}{	
	\begin{center}
		$\vlderivation {
			\vlin{\rlabrn{\IMP}}
			{y$ fresh$}
			{\Rightarrow \labels{x}{(\DIA A \IMP \BOX B) \IMP \BOX (A \IMP B)}}
			{\vlin {\rlabrn{\BOX}}
				{z, w$ fresh$}
				{x \le y, \labels{y}{\DIA A \IMP \BOX B} \Rightarrow \labels{y}{\BOX (A \IMP B)}}
				{\vlin {\rlabrn{\IMP}}
					{u$ fresh$}
					{x \le y, y\le z, zRw, \labels{y}{\DIA A \IMP \BOX B} \Rightarrow \labels{w}{A \IMP B}}
					{\vlin {\color{red}{\rn{F_1}}}
						{}
						{x \le y, y \le z, w \le u, zRw, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}}
						{\vlin {\rn{trans}}
							{}
							{x \le y, y \le z, w \le u, z \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}}
							{\vliin {\llabrn{\IMP}}
								{}
								{x \le y, y \le z, w \le u, z \le t, y \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}}
								{\vlhy{\circledast  \hspace{75mm}}}
								{\vlhy{\star}}}}}}}
		}$
		
	\end{center}
	
	
	The derivation continues as the result of applying the rule $\llabrn{\IMP}$. From this rule we obtain two trees:
	
	On one side, the derivation that follows from $\circledast$:
	
	\begin{center}
		
		$
		\vlderivation{
			\vlin{\llabrn{\IMP}}{}{\circledast}{\vlin {\rlabrn{\DIA}}
				{}
				{x \le y, y \le z, w \le u, z \le t, y \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}, \labels{t}{\DIA A}}
				{\vlin {\rn{refl}}
					{}
					{x \le y, y \le z, w \le u, z \le t, y \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}, \labels{t}{\DIA A}, \labels{u}{A}}
					{\vlin {\rn{id}}
						{}
						{x \le y, y \le z, w \le u, z \le t, y \le t, u \le u, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}, \labels{t}{\DIA A}, \labels{u}{A}}
						{\vlhy {}}}}}
		}$
	\end{center}
	
	And on the other hand, the derivation that follows from $\star$:
	
	\begin{center}
		
		\scalebox{0.92}{
			$\vlderivation{
				\vlin{\llabrn{\IMP}}{}{\star}{\vlin {\rn{refl}}
					{}
					{x \le y, y \le z, w \le u, z \le t, y \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A}, \labels{t}{\BOX B} \Rightarrow \labels{u}{B}}
					{\vlin {\llabrn{\BOX}}
						{}
						{x \le y, y \le z, w \le u, z \le t, y \le t, t \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A}, \labels{t}{\BOX B} \Rightarrow \labels{u}{B}}
						{\vlin {\rn{refl}}
							{}
							{x \le y, y \le z, w \le u, z \le t, y \le t, t \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A}, \labels{t}{\BOX B}, \labels{u}{B} \Rightarrow \labels{u}{B}}
							{\vlin {\rn{id}}
								{}
								{x \le y, y \le z, w \le u, z \le t, y \le t, t \le t, u \le u, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A}, \labels{t}{\BOX B}, \labels{u}{B} \Rightarrow \labels{u}{B}}
								{\vlhy {}}}}}}
			}$}
	\end{center}
}

