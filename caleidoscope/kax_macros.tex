%%%%%%%%%%%%%k4%%%%%%%%%%%%%%%%%%%%
\newcommand{\kfour}{	
	\begin{center}
		$\vlderivation {
			\vlin{\rlabrn{\IMP}}
			{y$ fresh$}
			{\Rightarrow \labels{x}{(\DIA A \IMP \BOX B) \IMP \BOX (A \IMP B)}}
			{\vlin {\rlabrn{\BOX}}
				{z, w$ fresh$}
				{x \le y, \labels{y}{\DIA A \IMP \BOX B} \Rightarrow \labels{y}{\BOX (A \IMP B)}}
				{\vlin {\rlabrn{\IMP}}
					{u$ fresh$}
					{x \le y, y\le z, zRw, \labels{y}{\DIA A \IMP \BOX B} \Rightarrow \labels{w}{A \IMP B}}
					{\vlin {\color{red}{\rn{F_1}}}
						{}
						{x \le y, y \le z, w \le u, zRw, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}}
						{\vlin {\rn{trans}}
							{}
							{x \le y, y \le z, w \le u, z \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}}
							{\vliin {\llabrn{\IMP}}
								{}
								{x \le y, y \le z, w \le u, z \le t, y \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}}
								{\vlhy{\circledast  \hspace{75mm}}}
								{\vlhy{\star}}}}}}}
		}$
		
	\end{center}
	
	
	The derivation continues as the result of applying the rule $\llabrn{\IMP}$. From this rule we obtain two trees:
	
	On one side, the derivation that follows from $\circledast$:
	
	\begin{center}
		
		$
		\vlderivation{
			\vlin{\llabrn{\IMP}}{}{\circledast}{\vlin {\rlabrn{\DIA}}
				{}
				{x \le y, y \le z, w \le u, z \le t, y \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}, \labels{t}{\DIA A}}
				{\vlin {\rn{refl}}
					{}
					{x \le y, y \le z, w \le u, z \le t, y \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}, \labels{t}{\DIA A}, \labels{u}{A}}
					{\vlin {\rn{id}}
						{}
						{x \le y, y \le z, w \le u, z \le t, y \le t, u \le u, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A} \Rightarrow \labels{u}{B}, \labels{t}{\DIA A}, \labels{u}{A}}
						{\vlhy {}}}}}
		}$
	\end{center}
	
	And on the other hand, the derivation that follows from $\star$:
	
	\begin{center}
		
		\scalebox{0.92}{
			$\vlderivation{
				\vlin{\llabrn{\IMP}}{}{\star}{\vlin {\rn{refl}}
					{}
					{x \le y, y \le z, w \le u, z \le t, y \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A}, \labels{t}{\BOX B} \Rightarrow \labels{u}{B}}
					{\vlin {\llabrn{\BOX}}
						{}
						{x \le y, y \le z, w \le u, z \le t, y \le t, t \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A}, \labels{t}{\BOX B} \Rightarrow \labels{u}{B}}
						{\vlin {\rn{refl}}
							{}
							{x \le y, y \le z, w \le u, z \le t, y \le t, t \le t, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A}, \labels{t}{\BOX B}, \labels{u}{B} \Rightarrow \labels{u}{B}}
							{\vlin {\rn{id}}
								{}
								{x \le y, y \le z, w \le u, z \le t, y \le t, t \le t, u \le u, zRw, tRu, \labels{y}{\DIA A \IMP \BOX B}, \labels{u}{A}, \labels{t}{\BOX B}, \labels{u}{B} \Rightarrow \labels{u}{B}}
								{\vlhy {}}}}}}
			}$}
	\end{center}
}

