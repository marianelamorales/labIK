%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
\section{Intuitionistic modal logics}\label{sec:intmod}
The language of {intuitionisitic modal logic} is the one of intuitionistic propositional logic with the modal operators $\BOX$ and $\DIA$, standing most generally for \emph{necessity} and \emph{possibility}.
%
Starting with a set $\mathcal{A}$ of atomic propositions, denoted by lower case letters $\fm a$, $\fm b$, $\fm c$,\ldots, modal formulas, denoted by capital letters $\fm A$, $\fm B$, $\fm C$, \ldots, are constructed from the grammar:
%
$$
\fm A \coloncolonequals
\fm a \mid \fm{A \AND A} \mid \fm{A \OR A} \mid \fm \BOT \mid \fm{A \IMP A} \mid \fm{\BOX A} \mid \fm{\DIA A}
$$
%

Obtaining the intuitionistic variant of $\mathsf{K}$ is more involved than the classical variant. 
%%
Lacking De Morgan duality, there are many variants of the \emph{distributivity axiom} $\mathsf{k}$ that are classically but not intuitionistically equivalent. Five axioms have been considered as primitives in the literature. An intuitionistic variant of the modal logic $\K$ can then be obtained from ordinary intuitionistic propositional logic $\rn{IPL}$ by adding:
%

%The axiomatisation that is now generally accepted as intuitionistic modal logic $\IK$ was given by Plotkin and Stirling~\cite{Plotkin} and is equivalent to the one proposed by Fischer-Servi~\cite{Fischer}. It is obtained from intuitionistic propositional logic $\mathsf{IPL}$ by adding:
\begin{itemize}
	\item the \emph{necessitation rule}: if $\fm A$ is a theorem then $\fm{\BOX A}$ is also a theorem; and
	\item the following five variants of $\rn{k}$:
	\begin{equation*}
	\label{eq:ik}%\hskip-2em
	\begin{array}[t]{r@{\;}l@{\qquad}r@{\;}l@{\qquad}r@{\;}l}
	\kax[1]\colon&\fm{\BOX(A\IMP B)\IMP(\BOX A\IMP\BOX B)}
	&
	\kax[3]\colon&\fm{\DIA(A\OR B)\IMP(\DIA A\OR\DIA B)}
	&
	\kax[5]\colon&\fm{\DIA\BOT\IMP\BOT}
	\\
	\kax[2]\colon&\fm{\BOX(A\IMP B)\IMP(\DIA A\IMP\DIA B)}
	&
	\kax[4]\colon&\fm{(\DIA A\IMP \BOX B)\IMP\BOX(A\IMP B)}\\%x[1ex]
	\end{array}
	\end{equation*}
\end{itemize}

The idea is that intuitionistic propositional logic does not allow the principle of \emph{Excluded Middle}, so the modalities $\BOX$ and $\DIA$ are not de Morgan duals any more, but one can choose to design the axiomatisation in order to relate them in different ways. The most basic intuitionistic modal system one can think of would be to consider only the $\BOX$ modality as regulated by the $\kax$ axiom (or as called here $\kax[1]$), which gives the system \hbox{$\rn{IPL}$ $\rn{+}$ $\rn{nec}$ $\rn{+}$ $\kax[1]$}. However this would give strictly no information on the behaviour of the $\DIA$ modality.
It seems that Fitch \cite{fitch:pm48} was the first one to propose a way to treat $\DIA$ in an intuitionistic system by considering the system  $\rn{IPL}$ $\rn{+}$ $\rn{nec}$ $\rn{+}$ $\kax[1]$ $\rn{+}$ $\kax[2]$, which is now sometimes called $\rn{CK}$ for \emph{constructive modal logic}. Wijekesera \cite{wijesekera:apal90} also considered the axiom $\kax[5]$, which states that $\DIA$ distributes over 0-ary disjunctions, but did not assume that it would always distribute over binary disjunctions; the system he proposed was therefore  $\rn{IPL}$ $\rn{+}$ $\rn{nec}$ $\rn{+}$ $\kax[1]$ $\rn{+}$ $\kax[2]$  $\rn{+}$ $\kax[5]$. In these systems, however, the addition of the \emph{Excluded Middle} principle to it does not yield classical modal logic $\K$, that is, it is not possible to retrieve the De Morgan duality of $\BOX$ and $\DIA$ in this case.

The axiomatisation that is now generally accepted as \emph{intuitionistic modal logic} denoted by $\IK$ was given by Plotkin and Stirling \cite{plotkin:stirling:86} and is equivalent to the one proposed by Fischer-Servi \cite{fischer-servi:84} and by Ewald \cite{ewald:jsl86} in the case of intuitionistic tense logic. It is taken to be    $\rn{IPL}$ $\rn{+}$ $\rn{nec}$ $\rn{+}$ $\kax[1]$ $\rn{+}$ $\kax[2]$ $\rn{+}$ $\kax[3]$ $\rn{+}$ $\kax[4]$  $\rn{+}$ $\kax[5]$.


The Kripke semantics for $\IK$ was first defined by Fischer-Servi~\cite{fischer-servi:84}.
%
It combines the Kripke semantics for intuitionistic propositional logic and the one for classical modal logic, using two distinct relations on the set of worlds.

\begin{definition}
	A \emph{bi-relational frame} $\F$ is a triple $\langle W, \rel, \le \rangle$ 
	%	of a non-empty set of worlds $W$ equipped with two binary relations $R$ and $\le$, where $R$ being the modal \emph{accessibility relation} and $\le$ a preorder (\emph{i.e.} a reflexive and transitive relation), satisfying the following conditions:
	of a set of worlds $W$ equipped with an {accessibility relation} $\rel$ and a preorder $\le$ (\emph{i.e.}\ a reflexive and transitive relation) satisfying:
	\begin{enumerate}
		\item[($\rn{F_1}$)] For all $\lb u, \lb v, \lb{v'} \in W$, if $\accs uv$ and $\futs v{v'}$, there exists $\lb{u'}$ s.t.~$\futs u{u'}$ and $\accs{u'}{v'}$.
		
		\begin{equation*}
		\xymatrix{
			\lb{u'} \ar@{.>}[r]^R  & \lb{v'} \\
			\lb u \ar@{.>}[u]^{\le} \ar@{->}[r]^R  & \lb v \ar@{->}[u]_{\le}
		}
		\end{equation*}
		
		\item[($\rn{F_2}$)] For all $\lb {u'}, \lb u, \lb v \in W$, if $\futs uv$, there exists $\lb {v'}$ s.t.~$\accs{u'}{v'}$ and $\futs v{v'}$.
		
		\begin{equation*}
		\xymatrix{
			\lb{u'} \ar@{.>}[r]^R & \lb{v'} \\
			\lb u \ar@{->}[u]^{\le} \ar@{->}[r]^R & \lb v \ar@{.>}[u]_{\le}
		}
		\end{equation*}
	\end{enumerate}
	%	
\end{definition}

\begin{definition}
	\label{model}
	A \emph{bi-relational model} $\M$ is a quadruple $\langle W, \rel,\le,V \rangle$ with $\langle W, \rel, \le \rangle$ a bi-relational frame and $V\colon W \to 2^\mathcal{A}$ a monotone valuation function, that is, a function mapping each world $\lb w$ to the subset of propositional atoms true at $\lb w$, additionally subject to:
	if $\lb w \le \lb{w'}$ then $V(\lb w)\subseteq V(\lb{w'})$.
\end{definition}

We write $\M, \lb w \Vdash \fm a$ if $\fm a \in V(\lb w)$, and inductively extend the $\Vdash$ relation to all formulas, following the rules for both intuitionistic and modal Kripke models:

\begin{equation}\label{eq:kripke}
	\begin{array}{rcl}
	%\parbox{30em}{%
		\M, \lb w \Vdash \fm{A \AND B} & \mbox{iff} & \M, \lb w \Vdash \fm A \mbox{ and } \M, \lb w \Vdash \fm B\\
		
		\M, \lb w \Vdash \fm{A \OR B} & \mbox{iff} & \M, \lb w \Vdash \fm A \mbox{ or } \M, \lb w \Vdash \fm B\\
	
		\M, \lb w \Vdash \fm{A \IMP B} & \mbox{iff} & \mbox{for all } \lb{w'} \mbox{ with } \futs w{w'}, \mbox{ if } \M, \lb{w'} \Vdash \fm A \mbox{ then } \M, \lb{w'} \Vdash \fm B\\
		
		\M, \lb w \Vdash \fm{\BOX A} & \mbox{iff} & \mbox{for all } \lb{w'} \mbox{ and } \lb u \mbox{ with } \futs w{w'} \mbox{ and } \accs {w'}u, \M, \lb u \Vdash \fm A \hfill \\ %$(\ast)$
		
		\M, \lb w \Vdash \fm{\DIA A} & \mbox{iff} & \mbox{there exists a } \lb u \mbox{ such that } \accs wu \mbox{ and } \M, \lb u \Vdash \fm A.
		
	\end{array}
\end{equation}
Observe that we never have that $\M, \lb w \Vdash \fm\bot$. 
%
We write $\M, \lb w \not\Vdash \fm A$ if it is not the case that $\M, \lb w \Vdash \fm A$, but contrarily to the classical case, we do not have $\M, \lb w \Vdash \fm{\neg A}$ iff $\M, \lb w \not\Vdash \fm A$ (since $\fm{\neg A}$ is defined as $\fm{A \IMP \bot}$).

From the monotonicity of the valuation function $V$, we get a monotonicity property for the relation:
\begin{proposition}(Monotonicity) 
	For any formula $\fm A$ and for $\lb w, \lb{w'} \in W$, if $\futs w{w'}$ and $\M, \lb w \Vdash \fm A$, then $\M, \lb{w'} \Vdash \fm A$.
\end{proposition}



\begin{definition}
	A formula $\fm A$ is \emph{satisfied} in a model $\M = \langle W, \rel, \le, V \rangle$, if for all $\lb w \in W$ we have $\M, \lb w \Vdash \fm A$.
	%
	A formula $\fm A$ is \emph{valid} in a frame $\F = \langle W, \rel, \le \rangle$, if for all valuations $V$, the formula $\fm A$ is satisfied in $\langle W, R, \le, V \rangle$.
\end{definition}



%It then was investigated in detail in~\cite{Simpson}, in which strong arguments are given in favour of this axiomatic definition: 
%
%it allows for adapting to intuitionistic logic the standard embedding of modal logic into first-order logic, and also provides an extension of the standard Kripke semantics for classical modal logic to the intuitionistic case.

Similarly to the classical case, the correspondence between syntax and semantics for $\IK$ can be stated as follows.

\begin{theorem}[\cite{fischer-servi:84,plotkin:stirling:86}]\label{thm:plotkin}
	A formula $\fm A$ is a theorem of $\IK$ if and only if $\fm A$ is valid in every bi-relational frame.
\end{theorem}


% we would like to consider special restrictions on these bi-relational frames. For example, we would be interested in having a correspondence between the logic $\IK$ extended with some variants of axioms and bi-relational frames satisfyins the corresponding d
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%
%\section{Intuitionistic modal logics}\label{sec:intmod}
%
%	The language of {intuitionisitic modal logic} is the one of intuitionistic propositional logic with the modal operators $\BOX$ and $\DIA$, standing most generally for \emph{necessity} and \emph{possibility}.
%	%
%	Starting with a set $\mathcal{A}$ of atomic propositions, denoted $a$, modal formulas are constructed from the grammar:
%	%
%	$$
%	A \coloncolonequals
%	a \mid A \AND A \mid \TOP \mid A \OR A \mid \BOT \mid A \IMP A \mid \BOX A \mid \DIA A
%	$$
%	%
%        \lutz{why do we have $\TOP$?}
%	We might sometimes write $\NOT A$ to mean $A \IMP \BOT$. \lutz{do we?}
%
%Obtaining the intuitionistic variant of $\mathsf{K}$ is more involved than the classical variant. 
%%%
%Lacking De Morgan duality, there are several variants of $\mathsf{k}$ that are classically but not intuitionistically equivalent. Five axioms have been considered as primitives in the literature. 
%%
%
%The axiomatisation that is now generally accepted as intuitionistic modal logic $\IK$ was given by Plotkin and Stirling~\cite{Plotkin} and is equivalent to the one proposed by Fischer-Servi~\cite{Fischer}.
%%, and by Ewald~\cite{Ewald} in the case of intuitionistic tense logic. 
%%
%It is obtained from intuitionistic propositional logic by adding:
%\begin{itemize}
%\item the \emph{necessitation rule}: if $A$ is a theorem then $\BOX A$ is also a theorem; and
%\item the following five variants of the \emph{distributivity axiom}:
%\begin{equation*}
%\label{eq:ik}%\hskip-2em
%\begin{array}[t]{r@{\;}l@{\quad}r@{\;}l@{\quad}r@{\;}l}
%\kax[1]\colon&\BOX(A\IMP B)\IMP(\BOX A\IMP\BOX B)
%&
%\kax[3]\colon&\DIA(A\OR B)\IMP(\DIA A\OR\DIA B)
%&
%\kax[5]\colon&\DIA\BOT\IMP\BOT
%\\
%\kax[2]\colon&\BOX(A\IMP B)\IMP(\DIA A\IMP\DIA B)
%&
%\kax[4]\colon&(\DIA A\IMP \BOX B)\IMP\BOX(A\IMP B)\\%x[1ex]
%\end{array}
%\end{equation*}
%\end{itemize}
%
%The relational semantics for $\IK$ was first defined by Fischer-Servi~\cite{Fischer}.
%%
%It combines the Kripke semantics for intuitionistic propositional logic and the one for classical modal logic, using two distinct relations on the set of worlds.
%
%\begin{definition}
%	A \emph{bi-relational frame} $\F$ is a triple $\langle W, R, \le \rangle$ 
%%	of a non-empty set of worlds $W$ equipped with two binary relations $R$ and $\le$, where $R$ being the modal \emph{accessibility relation} and $\le$ a preorder (\emph{i.e.} a reflexive and transitive relation), satisfying the following conditions:
%	of a set of worlds $W$ equipped with an {accessibility relation} $\rel$ and a preorder $\le$ (\emph{i.e.} a reflexive and transitive relation) satisfying:
%	\begin{enumerate}
%		\item[($F_1$)] For $u, v, v' \in W$, if $u \rel v$ and $v \le v'$, there exists $u'$ s.t.~$u \le u'$ and $u' \rel v'$.
%		
%			\begin{equation*}
%			\xymatrix{
%				u' \ar@{.>}[r]_R  & v' \\
%				u \ar@{.>}[u]^{\le} \ar@{->}[r]_R  & v \ar@{->}[u]_{\le}
%			}
%			\end{equation*}
%		
%		\item[($F_2$)] For $u', u, v \in W$, if $u \le v$, there exists $v'$ s.t.~$u' \rel v'$ and $v\le v'$.
%		
%			\begin{equation*}
%			\xymatrix{
%				u' \ar@{.>}[r]^R & v' \\
%				u \ar@{->}[u]^{\le} \ar@{->}[r]^R & v \ar@{.>}[u]_{\le}
%			}
%			\end{equation*}
%	\end{enumerate}
%%	
%\end{definition}
%
%\begin{definition}
%	\label{model}
%	A \emph{bi-relational model} $\M$ is a quadruple $\langle W, R,\le,V \rangle$ with $\langle W, R, \le \rangle$ a bi-relational frame and $V\colon W \to 2^\mathcal{A}$ a monotone valuation function, that is, a function mapping each world $w$ to the subset of propositional atoms true at $w$, additionally subject to:
%	if $w \le w'$ then $V(w)\subseteq V(w')$.
%\end{definition}
%
%We write $w \Vdash a$ if $a \in V(w)$, and by definition, we always have $w \Vdash \top$ and never that $w \Vdash \bot$. 
%%
%Then the relation is extended to all formulas by induction, following the rules for both intuitionistic and modal Kripke models:
%\begin{equation}
%  \label{eq:kripke}
%  \parbox{30em}{%
%  $w \Vdash A \AND B$ iff $w \Vdash A$ and $w \Vdash B$
%
%$w \Vdash A \OR B$ iff $w \Vdash A$ or $w \Vdash B$
%
%$w \Vdash A \IMP B$ iff for all $w'$ with $w \le w'$, if $w' \Vdash A$ then $w' \Vdash B$
%
%$w \Vdash \BOX A$ iff for all $w'$ and $u$ with $w \le w'$ and $w'Ru$, $u \Vdash A$ \hfill %$(\ast)$
%
%$w \Vdash \DIA A$ iff there exists a $u$ such that $wRu$ and $u \Vdash A$.
%
%%We write $w \not\Vdash A$  if it is not the case that $w\Vdash A$.\\
%}
%\end{equation}
%\todo{fix typography}
%
%We write $w \not\Vdash A$ if it is not the case that $w \Vdash A$, but contrarily to the classical case, we do not have $w \Vdash \neg A$ iff $w \Vdash A$ (since $\neg A$ is defined as $A \IMP \bot$).
%
%From the monotonicity of the valuation function $V$, we get a monotonicity property for the relation:
%\begin{proposition}(Monotonicity) 
%For any formula $A$ and for $w, w' \in W$, if $w \le w'$ and $w \Vdash A$, then $w' \Vdash A$.
%\end{proposition}
%
%
%
%\begin{definition}
%	A formula $A$ is \emph{satisfied} in a model $\M = \langle W, R, \le, V \rangle$, if for all $w \in W$ we have $w \Vdash A$.
%%
%	A formula $A$ is \emph{valid} in a frame $\F = \langle W, R, \le \rangle$, if for all valuations $V$, $A$ is satisfied in $\langle W, R, \le, V \rangle$.
%\end{definition}
%
%
%
%%It then was investigated in detail in~\cite{Simpson}, in which strong arguments are given in favour of this axiomatic definition: 
%%
%%it allows for adapting to intuitionistic logic the standard embedding of modal logic into first-order logic, and also provides an extension of the standard Kripke semantics for classical modal logic to the intuitionistic case.
%
%Similarly to the classical case, in the case of $\IK$, the correspondence between syntax and semantics is recovered.
%
%\begin{theorem}[Fischer-Servi~\cite{Fischer}, Plotkin and Stirling~\cite{Plotkin}]\label{thm:plotkin}
%	A formula $A$ is a theorem of $\IK$ if and only if $A$ is valid in every bi-relational frame.
%\end{theorem}
%
%\todo{Add something else about Fischer-Servi theorem?}\lutz{no, but we should add the Plotkin-Stirling theorem about the relation between axioms and frame conditions}
%