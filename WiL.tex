%% For double-blind review submission, w/o CCS and ACM Reference (max submission space)
%\documentclass[sigplan,10pt,review,anonymous]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For double-blind review submission, w/ CCS and ACM Reference
%\documentclass[sigplan,10pt,review,anonymous]{acmart}\settopmatter{printfolios=true}
%% For single-blind review submission, w/o CCS and ACM Reference (max submission space)
%\documentclass[sigplan,10pt,review]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For single-blind review submission, w/ CCS and ACM Reference
%\documentclass[sigplan,10pt,review]{acmart}\settopmatter{printfolios=true}
%% For final camera-ready submission, w/ required CCS and ACM Reference
\documentclass[sigplan,10pt]{acmart}\settopmatter{}


%% Conference information
%% Supplied to authors by publisher for camera-ready submission;
%% use defaults for review submission.
\acmConference[WiL'18]{Second Women in Logic (WiL) Workshop}
\acmYear{2018}
%\acmISBN{} % \acmISBN{978-x-xxxx-xxxx-x/YY/MM}
%\acmDOI{} % \acmDOI{10.1145/nnnnnnn.nnnnnnn}
%\startPage{1}

%% Copyright information
%% Supplied to authors (based on authors' rights management selection;
%% see authors.acm.org) by publisher for camera-ready submission;
%% use 'none' for review submission.
\setcopyright{none}
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
%\setcopyright{rightsretained}
%\copyrightyear{2017}           %% If different from \acmYear

%% Bibliography style
\bibliographystyle{ACM-Reference-Format}
%% Citation style
%\citestyle{acmauthoryear}  %% For author/year citations
%\citestyle{acmnumeric}     %% For numeric citations
%\setcitestyle{nosort}      %% With 'acmnumeric', to disable automatic
                            %% sorting of references within a single citation;
                            %% e.g., \cite{Smith99,Carpenter05,Baker12}
                            %% rendered as [14,5,2] rather than [2,5,14].
%\setcitesyle{nocompress}   %% With 'acmnumeric', to disable automatic
                            %% compression of sequential references within a
                            %% single citation;
                            %% e.g., \cite{Baker12,Baker14,Baker16}
                            %% rendered as [2,3,4] rather than [2-4].


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Note: Authors migrating a paper from traditional SIGPLAN
%% proceedings format to PACMPL format must update the
%% '\documentclass' and topmatter commands above; see
%% 'acmart-pacmpl-template.tex'.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%% Some recommended packages.
\usepackage{booktabs}   %% For formal tables:
                        %% http://ctan.org/pkg/booktabs
\usepackage{subcaption} %% For complex figures with subfigures/subcaptions
                        %% http://ctan.org/pkg/subcaption

%% Added Packages
\usepackage{virginialake}\vlnosmallleftlabels
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{float}
\usepackage{color}
\usepackage{bm}

\floatstyle{boxed} 
\restylefloat{figure}
%\usepackage{colonequals}
\newcommand{\vlhtr}[2]{\vlpd{#1}{}{#2}}

%% Marianela's macros
\renewcommand{\G}{\mathcal{G}}
\newcommand{\Left}{\mathcal{L}}
\newcommand{\Right}{\mathcal{R}}

%Symbols for System labK
\newcommand{\id}{id^{lab}}
\newcommand{\tolab}{\top^{lab}}
\newcommand{\vlab}{\wedge^{lab}}
\newcommand{\olab}{\vlor^{lab}}
\newcommand{\blab}{\square^{lab}}
\newcommand{\dlab}{\lozenge^{lab}}

%Labelled proof system
\renewcommand{\toprule}{\G \Rightarrow \Right, x  \colon   \top}
\newcommand{\vlabr}{\G \Rightarrow \Right, x  \colon   A}
\newcommand{\vlabu}{\G \Rightarrow \Right, x  \colon   B}
\newcommand{\olabr}{\G \Rightarrow \Right, x  \colon   A, x  \colon   B}
\newcommand{\blabr}{\G \Rightarrow \Right, x  \colon   \square A}
\newcommand{\blabu}{\G, x$R$y \Rightarrow \Right, y  \colon   A}
\newcommand{\dlabr}{\G, x$R$y \Rightarrow \Right, x  \colon   \lozenge A}
\newcommand{\dlabu}{\G, x$R$y \Rightarrow \Right, x  \colon   \lozenge A, y  \colon} 


%Symbols for system labIK
\newcommand{\botlab}{\bot_{L}^{lab}}
\newcommand{\toplab}{\top_{R}^{lab}}
\newcommand{\andleflab}{\wedge_{L}^{lab}}
\newcommand{\andriglab}{\wedge_{R}^{lab}}
\newcommand{\orleflab}{\vlor_{L}^{lab}}
\newcommand{\orriglabo}{\vlor_{R1}^{lab}}
\newcommand{\orriglabt}{\vlor_{R2}^{lab}}
\newcommand{\irlab}{\vljm_{R}^{lab}}
\newcommand{\illab}{\vljm_{L}^{lab}}
\newcommand{\dllab}{\lozenge_{L}^{lab}}
\newcommand{\drlab}{\lozenge_{R}^{lab}}
\newcommand{\bllab}{\square_{L}^{lab}}
\newcommand{\brlab}{\square_{R}^{lab}}

%Sumbols for System labheartIK
\newcommand{\gklmn}{\boxtimes_{gklmn}}
\newcommand{\ids}{id}
\newcommand{\idg}{id_{g}}
\newcommand{\refl}{refl}
\newcommand{\trans}{trans}
\newcommand{\cut}{cut}
\newcommand{\fone}{F1}
\newcommand{\ftwo}{F2}
\newcommand{\sbot}{\bot_{L}}
\newcommand{\Stop}{\top_{R}}
\newcommand{\svlef}{\wedge_{L}}
\newcommand{\svrig}{\wedge_{R}}
\newcommand{\solef}{\vlor_{L}}
\newcommand{\sorig}{\vlor_{R}}
\newcommand{\sorone}{\vlor_{R1}}
\newcommand{\sotwo}{\vlor_{R2}}
\newcommand{\sir}{\vljm_{R}}
\newcommand{\sil}{\vljm_{L}}
\newcommand{\sdl}{\lozenge_{L}}
\newcommand{\sdr}{\lozenge_{R}}
\newcommand{\sbl}{\square_{L}}
\newcommand{\sbr}{\square_{R}}
\newcommand{\smon}{mon_{L}}
\newcommand{\M}{\mathcal{M}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\Gone}{\mathcal{G}_{1}}
\newcommand{\Gtwo}{\mathcal{G}_{2}}
\newcommand{\Dw}{\mathcal{D}^{w}}
\newcommand{\Dwone}{\mathcal{D}_{1}^{w}}
\newcommand{\Dwtwo}{\mathcal{D}_{2}^{w}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\Done}{\mathcal{D}_{1}}
\newcommand{\Dtwo}{\mathcal{D}_{2}}


%System LABIK
\newcommand{\conjrig}{\G, \Left \Rightarrow \Right, x \colon A}
\newcommand{\conjrigh}{\G, \Left \Rightarrow \Right, x  \colon B}
\newcommand{\conjlef}{\G, \Left, x  \colon  A, x \colon B \Rightarrow \Right}



%% Sonia's macros
\newcommand{\marianela}[1]{{\color{purple}[Marianela: #1]}}
\newcommand{\sonia}[1]{{\color{blue}[Sonia: #1]}}
\newcommand{\lutz}[1]{{\color{green}[Lutz: #1]}}
\newcommand{\todo}[1]{{\color{red}[TODO: #1]}}

%%% Systems
\newcommand*{\lab}{\mathsf{lab}}
\newcommand*{\IK}{\mathsf{IK}}


%%% Connectives
\newcommand*{\NOT}{\neg}
\newcommand*{\AND}{\mathbin{\wedge}}
\newcommand*{\TOP}{\mathord{\top}}
\newcommand*{\OR}{\mathbin{\vee}}
\newcommand*{\BOT}{\mathord{\bot}}
\newcommand*{\IMP}{\mathbin{\supset}}

\newcommand*{\BOX}{\mathord{\Box}}
\newcommand*{\DIA}{\mathord{\Diamond}}


\newcommand*{\labels}[2]{{\color{blue}{#1}\:\colon}{#2}}
\newcommand{\SEQ}{\Rightarrow}
\newcommand*{\DD}{\mathcal{D}}
\newcommand*{\rn}[1]  {\ensuremath{\mathsf{#1}}}
\newcommand*{\invr}[1]{#1^\bullet}
\newcommand*{\rel}{R}
\newcommand*{\rlabrn}[2][]  {\rn{#2}_{R#1}}%^\lab}}
\newcommand*{\llabrn}[2][]  {\rn{#2}_{L#1}}%^\lab}}

\begin{document}

%% Title information
\title[Decomposing labelled proof theory for intuitionistic modal logic]{Decomposing labelled proof theory\\ for intuitionistic modal logic}        %%[Short Title] is optional;
                                        %% when present, will be used in
                                        %% header instead of Full Title.
%\titlenote{with title note}             %% \titlenote is optional;
                                        %% can be repeated if necessary;
                                        %% contents suppressed with 'anonymous'
%\subtitle{Subtitle}                     %% \subtitle is optional
%\subtitlenote{with subtitle note}       %% \subtitlenote is optional;
                                        %% can be repeated if necessary;
                                        %% contents suppressed with 'anonymous'


%% Author information
%% Contents and number of authors suppressed with 'anonymous'.
%% Each author should be introduced by \author, followed by
%% \authornote (optional), \orcid (optional), \affiliation, and
%% \email.
%% An author may have multiple affiliations and/or emails; repeat the
%% appropriate command.
%% Many elements are not rendered, but should be provided for metadata
%% extraction tools.

%% Author with single affiliation.
\author{Sonia Marin}
%\authornote{with author1 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
%\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
%  \position{Position1}
%  \department{Department1}              %% \department is recommended
  \institution{IT-Universitetet i K{\o}benhavn}            %% \institution is required
%  \streetaddress{Street1 Address1}
%  \city{City1}
%  \state{State1}
%  \postcode{Post-Code1}
  \country{Denmark}                    %% \country is recommended
}
%\email{first1.last1@inst1.edu}          %% \email is recommended

\author{Marianela Morales}
%\authornote{with author2 note}          %% \authornote is optional;
%% can be repeated if necessary
%\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
	%  \position{Position2a}
	%  \department{Department2a}             %% \department is recommended
	\institution{Universidad Nacional de C\'ordoba}           %% \institution is required
	%  \streetaddress{Street2a Address2a}
	%  \city{City2a}
	%  \state{State2a}
	%  \postcode{Post-Code2a}
	\country{Argentina}                   %% \country is recommended
}
%\email{first1.last1@inst1.edu}          %% \email is recommended

\author{Lutz Stra{\ss}burger}
%\authornote{with author2 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
%\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
%  \position{Position2a}
%  \department{Department2a}             %% \department is recommended
  \institution{Inria Saclay \& LIX} %, \'Ecole Polytechnique}           %% \institution is required
%  \streetaddress{Street2a Address2a}
%  \city{City2a}
%  \state{State2a}
%  \postcode{Post-Code2a}
  \country{France}                   %% \country is recommended
}
%\email{first2.last2@inst2a.com}         %% \email is recommended


%% Abstract
%% Note: \begin{abstract}...\end{abstract} environment must come
%% before \maketitle command
\begin{abstract}
We present a labelled deduction for intuitionistic modal logic that
comes with two relation symbols, one for the accessible world
relation associated with the Kripke semantics for modal logics, and
one for the preorder relation associated with the Kripke semantics
for intuitionistic logic. Thus, our labelled system is in close
correspondence to the birelational Kripke models.
\end{abstract}


%% 2012 ACM Computing Classification System (CSS) concepts
%% Generate at 'http://dl.acm.org/ccs/ccs.cfm'.
%\begin{CCSXML}
%<ccs2012>
%<concept>
%<concept_id>10011007.10011006.10011008</concept_id>
%<concept_desc>Software and its engineering~General programming languages</concept_desc>
%<concept_significance>500</concept_significance>
%</concept>
%<concept>
%<concept_id>10003456.10003457.10003521.10003525</concept_id>
%<concept_desc>Social and professional topics~History of programming languages</concept_desc>
%<concept_significance>300</concept_significance>
%</concept>
%</ccs2012>
%\end{CCSXML}
%
%\ccsdesc[500]{Software and its engineering~General programming languages}
%\ccsdesc[300]{Social and professional topics~History of programming languages}
%% End of generated code


%% Keywords
%% comma separated list
%\keywords{Proof theory, Intuitionistic modal logic, Labelled sequents.}  %% \keywords are mandatory in final camera-ready submission


%% \maketitle
%% Note: \maketitle command must come after title commands, author
%% commands, abstract environment, Computing Classification System
%% environment and commands, and keywords command.
\maketitle


\section{Introduction}
%%One possible-world semantics was established as a solid base to define modal logics, the idea of incorporating these notions into the proof theory of modal logics emerged. Fitch seems to have been the first one to formalise it, directly including symbols representing worlds into the language of his proofs in natural deduction \cite{Fitch}.

\emph{Labelled deduction} has been proposed by Gabbay~\cite{Gabbay} in the 80's as a unifying framework throughout proof theory in order to provide proof
systems for a wide range of logics. 
%
For modal logics it can take
the form of labelled natural deduction and labelled sequent systems as
used, for example, by Simpson~\cite{Simpson}, Vigano~\cite{Vigano} and
Negri~\cite{Negri}. 
%
These formalisms make explicit use not only of
labels, but also of relational atoms. 
%
To our knowledge, all labelled
systems proposed so far had only one relational symbol, 
\sonia{Incorrect. We even cite~\cite{Maffezioli} below}
either representing the \emph{accessible world relation $R$} (for modal
logics) or the \emph{future relation $\le$} (for intuitionistic
logic). 
%
In this short note we propose a system that unifies both, and
thus is able to use the full power of the bi-relational semantics for
intuitionistic modal logics.

\sonia{Removed paragraph. Simpson's system can easily be made multi-conclusion in the style of Maehara without the $\le$-atoms.}\lutz{maybe, but getting all the theorems right is not so easy, we had a hard time in the nested variant}

For sequent systems for intuitionistic logics there is always a choice
to be made: make the system \emph{single conclusion} following
Gentzen~\cite{Gentzen} or \emph{multiple conclusion} following
Maehara~\cite{Maehara}. In our work we choose the multiple conclusion
variant because of the closer correspondence to the semantics. In that
respect, our system is closer to~\cite{kuz:str} than
to~\cite{Simpson} and~\cite{mar:str}.

\section{Preliminaries on intuitionistic modal logics}

\sonia{Removed the part on the classical labelled calculus. Don't think we need it in a short version.}
%%Labelled sequents are formed from by labelled formulas of the form $x \colon A$  and relational atoms of the form $x$R$y$, where $x$, $y$ range over a set of variables and $A$ is a modal formula. A one-sided labelled sequent is then of the form $\G \Rightarrow \Right$ where $\G$ denotes a set of relational atoms and $\Right$ a multiset of labelled formulas. A simple proof system for classical modal logic K can be obtained in this formalism (\textbf{Fig. 1}). 
%%
%%\begin{figure}[h]
%%\begin{center}
%%
%%$\vlderivation {\vlinf{\id}{}{\G \Rightarrow \Right, x: a, x: \vls-a}{}}$
%%\hspace{7mm}$\vlderivation {\vlinf{\tolab}{}{\toprule}{}}$
%%
%%
%%$\vliinf{\vlab}{}{\G \Rightarrow \Right, x :\vls(A.B)}{\vlabr}{\vlabu}$
%%\hspace{7mm}$\vlinf{\olab}{}{\G \Rightarrow \Right, x \colon \vls[A.B]}{\olabr}$
%%
%%
%%$\vlinf{\blab}{y$ fresh$}{\blabr}{\blabu}$
%%\hspace{7mm}$\vlinf{\dlab}{}{\dlabr}{\dlabu}$
%%
%%
%%\end{center}
%%\caption{System labK}
%%\end{figure}
%%These rule schemes can occur in different contexts and different calculi. The context that interests us is when it is applied to modal logic.
%%\\
%%
%%The idea to extend this system to another to capture intuitionistic modal logics allows us to study the Kripke semantics for this type of logics:

\sonia{Formulas need to be defined.
	
	The language of {intuitionisitic modal logic} is obtained from the one of intuitionistic propositional logic by adding the modal connectives $\BOX$ and $\DIA$. %, standing most generally for \emph{necessity} and \emph{possibility}.
	%
	Starting with a set $\mathcal{A}$ of atomic propositions denoted $a$, modal formulas are constructed from the following grammar:
	%
	$$
	A  ::=
	a \mid A \AND A \mid \TOP \mid A \OR A \mid \BOT \mid A \IMP A \mid \BOX A \mid \DIA A
	$$
	%
	%We might sometimes write $\NOT A$ to mean $A \IMP \BOT$.
}

\marianela{is this enough as an introduction of the axiomatisations to present the theorem 2.5?}

The axiomatisation that is now generally accepted as intuitionistic modal logic denoted by IK was given by Plotkin and Stirling~\cite{Plotkin} and is equivalent to the one proposed by Fischer-Servi ~\cite{Fischer}, and by Ewald~\cite{Ewald} in the case of intuitionistic tense logic. It then was investigated in detail in ~\cite{Simpson}, in which strong arguments are given in favour of this axiomatic definition: it allows for adapting to intuitionistic logic the standard embedding of modal logic into first-order logic, and also provides an extension of the standard Kripke semantics for classical modal logic to the intuitionistic case.


The Kripke semantics for IK was first defined by Fischer-Servi in ~\cite{Fischer}.
This semantics for intuitionistic modal logic combines the Kripke semantics for intuitionistic propositional logic and the one for classical modal logic, using two distinct relations on the set of worlds.

\begin{definition}
	A \emph{bi-relational frame} $\F$ is a triple $\langle W, R, \le \rangle$ of a non-empty set of worlds $W$ equipped with two binary relations $R$ and $\le$, where $R$ being the modal \emph{accessibility relation} and $\le$ a preorder (\emph{i.e.} a reflexive and transitive relation), satisfying the following conditions:
	\begin{itemize}
		\item[(F1)] For all worlds $u, v, v'$, if $u$R$v$ and $v \le v'$, there exists a $u'$ such that $u \le u'$ and $u'$R$v'$.
		
		\item[(F2)] For all worlds $u', u, v$, if $u \le v$, there exists a $v'$ such that $u'$R$v'$ and $v\le v'$.
	\end{itemize}
	
\end{definition}

\begin{definition}
	A \emph{bi-relational model} $\M$ is a quadruple $\langle W, R,\le,V \rangle$ with $\langle W, R, \le \rangle$ a bi-relational frame and $V\colon W \to 2^\mathcal{A}$ a monotone valuation function, that is, a function mapping each world $w$ to the subset of propositional atoms true at $w$, additionally subject to:
$$w \le w' \Rightarrow V(w)\subseteq V(w')$$
\end{definition}


We write $w \Vdash a$ iff $a \in V(w)$ and we extend this relation to all formulas by induction, following the rules for both intuitionistic and modal Kripke models:

$w \not\Vdash \bot$

$w \Vdash \vls(A.B)$ iff $w \Vdash A$ and $w \Vdash B$

$w \Vdash \vls[A.B]$ iff $w \Vdash A$ or $w \Vdash B$

$w \Vdash A \vljm B$ iff for all $w'$ with $w \le w'$, if $w' \Vdash A$ then $w' \Vdash B$

$w \Vdash \square A$ iff for all $w'$ and $u$ with $w \le w'$ and $w'Ru$, $u \Vdash A$

$w \Vdash \lozenge A$ iff there exists a $u$ such that $wRu$ and $u \Vdash A$.

%We write $w \not\Vdash A$  if it is not the case that $w\Vdash A$.\\

We write $w \not\Vdash A$ if it is not the case that $w \Vdash A$, but contrarily to the classical case, we do not have $w \Vdash \neg A$ iff $w \Vdash A$ (since $\neg A$ is defined as $A \vljm \bot$).

From the monotonicity of the valuation function $V$ , we get a monotonicity property for the relation:\begin{proposition}(Monotonicity) 
For any formula $A$ and for $w, w' \in W$, if $w \le w'$ and $w \Vdash A$, then $w' \Vdash A$.

\end{proposition}

\begin{definition}
	A formula $A$ is \emph{satisfied} in a model $\M = \langle W, R, \le, V \rangle$, if for all $w \in W$ we have $w \Vdash A$.
\end{definition}

\begin{definition}
	A formula $A$ is \emph{valid} in a frame $\F = \langle W, R, \le \rangle$, if for all valuations $V$, $A$ is satisfied in $\langle W, R, \le, V \rangle$.
\end{definition}

%\begin{figure}[h]
%\begin{center}
%$\vlderivation{\vlinf{\id}{}{\G, \Left, x \colon a \Rightarrow x \colon a }{}}$
%\hspace{5mm}$\vlderivation{\vlinf{\botlab}{}{\G, \Left, x\colon \bot \Rightarrow z\colon A}{}}$
%\hspace{5mm}$\vlderivation{\vlinf{\toplab}{}{\G, \Left \Rightarrow x \colon \top}{}}$
%
%\vspace{2mm}
%
%$\vlinf{\andleflab}{}{\G,\Left, x \colon \vls(A.B) \Rightarrow z \colon C}{\G, \Left, x\colon \vls(A.B,x \colon A, x \colon B \Rightarrow z \colon C)}$\hspace{5mm}$\vliinf{\andriglab}{}{\G,\Left \Rightarrow x \colon \vls(A.B)}{\G, \Left \Rightarrow x \colon A}{\G, \Left \Rightarrow x \colon B}$
%
%\vspace{2mm}
%$\vliinf{\orleflab}{}{\G, \Left, x \colon \vls[A.B] \Rightarrow  \colon C}{\G, \Left, x \colon \vls[A.B], x \colon A \Rightarrow z \colon C}{\G, \Left, x \colon \vls[A.B], x   \colon   B \Rightarrow z \colon C}$
%
%\vspace{2mm}
%
%$\vlinf{\orriglabo}{}{\G, \Left \Rightarrow x \colon \vls[A.B]}{\G, \Left \Rightarrow x   \colon   A}$
%\hspace{7mm}$\vlinf{\orriglabt}{}{\G, \Left \Rightarrow x \colon \vls[A.B]}{\G, \Left \Rightarrow x \colon  B}$
%
%\vspace{2mm}
%
%$\vliinf{\illab}{}{\G, \Left, x \colon A \vljm B \Rightarrow z \colon C}{\G, \Left, x \colon A \vljm B \Rightarrow x \colon A}{\G, \Left, x \colon A \vljm B, x \colon B \Rightarrow z \colon C}$
%
%\vspace{2mm}
%
%$\vlinf{\irlab}{}{\G, \Left \Rightarrow x \colon A \vljm B}{\G, \Left, x \colon A \Rightarrow x \colon B}$
%
%\vspace{2mm}
%
% $\vlderivation {\vlinf{\bllab}{}{\G, x$R$y, \Left x \colon \square A \Rightarrow z \colon B}{\G, x$R$y, \Left, x \colon \square A, y \colon A \Rightarrow z \colon B}}$
%\hspace{5mm}  $\vlinf{\brlab}{$ $y$ fresh$}{\G, \Left \Rightarrow x \colon \square A}{\G, x$R$y, \Left \Rightarrow y \colon A}$
%
%\vspace{2mm}
%
%$\vlinf{\dllab}{$ $y$ fresh $}{\G, \Left, x \colon \lozenge A \Rightarrow z \colon B}{\G, x$R$y, \Left, x \colon \lozenge A, y \colon A \Rightarrow z \colon B}$
%\hspace{5mm}$\vlinf{\drlab}{}{\G, x$R$y, \Left,  \Rightarrow x \colon \lozenge A}{\G, x$R$y, \Left \Rightarrow y \colon A}$
%
%\end{center}
%\caption{System labIK}
%\end{figure}

\sonia{Removed the figure as it has nothing to do with the theorem. Fisher-Servi as well as Plotkin and Sterling only give Hilbert-style axiomatisations for the birelational models, no sequent calculi.
	Therefore, if we want to present this theorem, the axiomatisations also need to be introduced.}

\begin{theorem}[Fischer-Servi~\cite{Fischer}, Plotkin and Stirling~\cite{Plotkin}]
	A formula $A$ is a theorem of $\IK$ if and only if $A$ is valid in every bi-relational frame.
\end{theorem}


\section{Capturing intuitionistic modal logics with labels}

\sonia{I moved Simpson's system $\lab\IK$ here as we need to make explicit that we are aware of his approach and we propose something else.}

Simpson~\cite{Simpson} followed the lines of Gentzen in a labelled context, namely, he developed a labelled natural deduction framework for modal logics and then converted it into sequent systems with the consequent restriction to one formula on the right-hand side of each sequent.
This worked as well in the labelled setting as in the ordinary sequent case: we present Simpson's sequent system labIK (\ref{fig:labIK}) where intuitionistic labelled sequents are written $\G, \Left \SEQ z \colon C$ for some multiset of labelled formulas $\Left$, some formula $C$, some label $z$ and a set of relational atoms $\G$. 

\begin{figure}%[h]
	
	\begin{center}
		
		$\vlderivation { \vlin {\ids}{}{\G, \Left, x \colon a \Rightarrow x\colon a}{\vlhy {}}}$ \hspace{7mm} $\vlderivation { \vlin {\sbot}{}{\G, \Left, x \colon \bot \Rightarrow z\colon A}{\vlhy {}}}$
		
		\vspace{3mm}
		
		$\vlderivation {\vlin {\svlef}{}{\G, \Left, x \colon \vls(A.B) \Rightarrow z \colon C}{\vlhy {\G, \Left, x \colon A, x \colon B \Rightarrow z \colon C}}}$
		\hspace{7mm}$\vlderivation { \vliin {\svrig}{}{\G, \Left, \Rightarrow x \colon \vls(A.B)}{\vlhy {\G, \Left \Rightarrow x \colon A }}{\vlhy {\G, \Left \Rightarrow x \colon B}}}$
		
		\vspace{3mm}
		
		
		$\vlderivation {\vliin {\solef}{}{\G, \Left, x \colon \vls[A.B] \Rightarrow z \colon C}{\vlhy {\G, \Left, x \colon A \Rightarrow z \colon C}}{\vlhy {\G, \Left, x \colon B \Rightarrow z \colon C}}}$
		\hspace{7mm}$\vlderivation { \vlin{\sorone}{}{\G, \Left \Rightarrow x \colon \vls[A.B]}{\vlhy {\G, \Left \Rightarrow x \colon A}}}$
		\hspace{7mm}$\vlderivation { \vlin {\sotwo}{}{\G, \Left \Rightarrow x \colon \vls[A.B]}{\vlhy {\G, \Left \Rightarrow x \colon B}}}$
		
		\vspace{3mm}
		
		$\vlderivation {\vliin{\sil}{}{\G, \Left, x \colon A \vljm B \Rightarrow z \colon C}{\vlhy {\G, \Left \Rightarrow x \colon A}}{\vlhy {\G, \Left, x \colon B \Rightarrow z \colon C}}}$
		\hspace{7mm}$\vlderivation {\vlin{\sir}{}{\G,  \Left, x \colon A \Rightarrow x \colon B}{\vlhy {\G, \Left, x \colon A \Rightarrow x \colon B}}}$
		
		\vspace{3mm}
		
		$\vlderivation { \vlin {\sbl}{}{\G, x$R$y, \Left, x \colon \square A \Rightarrow z\colon B}{\vlhy {\G, x$R$y, \Left, x \colon \square A, y \colon A \Rightarrow z\colon B}}}$
		\hspace{7mm}$\vlderivation { \vlin {\sbr}{y$ is fresh$}{\G, \Left \Rightarrow x \colon \square A}{\vlhy {\G, x$R$y, \Left \Rightarrow y \colon A}}}$
		
		\vspace{3mm}
		
		$\vlderivation { \vlin{\sdl}{y$ is fresh$}{\G, \Left, x \colon \lozenge A \Rightarrow z \colon B}{\vlhy {\G, x$R$y, \Left, y \colon A \Rightarrow z \colon B}}}$
		\hspace{7mm}$\vlderivation {\vlin {\sdr}{}{\G,x$R$y, \Left \Rightarrow x \colon \lozenge A}{\vlhy {\G, x$R$y, \Left \Rightarrow y \colon A }}}$
		
	\end{center}
	
	\caption{System $\lab\IK$}
	\label{fig:labIK}
\end{figure}



\todo{Some background needs to be added} \marianela{what about the paragraph that I just added before?}
\begin{theorem}[Simpson~\cite{Simpson}]
	\label{thm:simpson-sound-compl}
	A formula $A$ is provable in the calculus $\lab\IK$ if and only if $A$ is valid in every bi-relational frame.
\end{theorem}


\begin{figure*}%[h]
	\begin{center}
		
		%$\vlinf{\sbot}{}{\G,\Left, x \colon \bot \Rightarrow \Right}{}$
		%\hspace{7mm}$\vlinf{\ids}{}{\G, \Left,x \le y, x \colon a \Rightarrow \Right, y \colon a}{}$ \hspace{7mm}$\vlinf{\Stop}{}{\G, \Left \Rightarrow \Right, x \colon \top}{}$
		$\vlderivation{\vlinf{\id}{}{\G, \Left, x \colon a \Rightarrow x \colon a }{}}$
		\hspace{5mm}$\vlderivation{\vlinf{\botlab}{}{\G, \Left, x\colon \bot \Rightarrow z\colon A}{}}$
		\hspace{5mm}$\vlderivation{\vlinf{\toplab}{}{\G, \Left \Rightarrow x \colon \top}{}}$
		
		\vspace{4mm}
		
		$\vlinf{\svlef}{}{\G,\Left, x \colon \vls(A.B) \Rightarrow \Right}{\conjlef}$
		\hspace{7mm}$\vliinf{\svrig}{}{\G,\Left \Rightarrow \Right, x \colon \vls(A.B)}{\conjrig}{\conjrigh}$
		
		\vspace{4mm}
		
		$\vliinf{\solef}{}{\G, \Left, x \colon \vls[A.B] \Rightarrow \Right}{\G, \Left, x   \colon   A \Rightarrow \Right}{\G, \Left, x   \colon   B \Rightarrow \Right}$
		\hspace{7mm}$\vlinf{\sorig}{}{\G, \Left \Rightarrow \Right, x \colon \vls[A.B]}{\G, \Left \Rightarrow \Right, x   \colon   A, x   \colon   B}$
		
		\vspace{4mm}
		
		$\vlinf{\sir}{$ $y$ fresh$}{\G, \Left \Rightarrow \Right, x \colon A \vljm B}{\G, \Left, x \le y, y \colon A \Rightarrow \Right, y \colon B}$
		
		\vspace{4mm}
		
		$\vliinf{\sil}{}{\G, \Left, x \le y, x \colon A \vljm B \Rightarrow \Right}{\G, \Left, x \le y, x \colon A \vljm B \Rightarrow \Right, y \colon A}{\G, \Left, x \le y, x \colon A \vljm B, y \colon B \Rightarrow \Right}$
		
		\vspace{4mm}
		
		
		$\vlderivation {\vlinf{\sbl}{}{\G, \Left, x \le y, y$R$z, x \colon \square A \Rightarrow \Right}{\G,\Left, x \le y, y$R$z, x \colon \square A, z \colon A \Rightarrow \Right}}$
		\hspace{5mm} $\vlinf{\sbr}{$ $y, z$ fresh$}{\G, \Left \Rightarrow \Right, x \colon \square A}{\G, \Left, x \le y, y$R$z \Rightarrow \Right, z \colon A}$
		
		
		\vspace{4mm}
		
		$\vlinf{\sdl}{$ $y$ fresh $}{\G, \Left, x \colon \lozenge A \Rightarrow \Right}{\G, \Left, x$R$y, y \colon A \Rightarrow \Right}$
		\hspace{5mm}$\vlinf{\sdr}{}{\G, \Left, x$R$y \Rightarrow \Right, x \colon \lozenge A}{\G, \Left, x$R$y \Rightarrow \Right, x \colon \lozenge A, y \colon A}$
		
		
		\vspace{2mm}
		
		
		\vspace{2mm}
		
		$\vlinf{\refl}{}{\G, \Left \Rightarrow \Right}{\G, x\le x, \Left, \Right}$
		\hspace{7mm} $\vlinf{\trans}{}{\G, x \le y, y \le z, \Left \Rightarrow \Right}{\G, x \le y, y \le z, x \le z, \Left \Rightarrow \Right}$
		
		
		\vspace{2mm}
		
		
		$\vlinf{\fone}{$ $u$ fresh$}{\G, \Left, x$R$y, y \le z \Rightarrow \Right}{\G, \Left, x$R$y, y \le z, x \le u, u$R$z \Rightarrow \Right}$
		\hspace{3mm} $\vlinf{\ftwo}{u$ fresh$}{\G, \Left, x$R$y,x \le z \Rightarrow \Right}{\G, \Left, x$R$y, x \le z, y \le u, z$R$u \Rightarrow \Right }$
		
	\end{center}
	
	\caption{System $\lab\heartsuit\IK$}% \lutz{that figure should be two-column...}}
	\label{fig:labHIK}
\end{figure*}

Echoing the definition of bi-relational structures, another extension of labelled deduction to the intuitionistic setting would be to use two sorts of relational atoms, one for the modal relation $R$ and another one for the intuitionistic relation $\leq$. 
%
This is the approach developed by Maffezioli, Naibo and Negri in~\cite{Maffezioli}. 
%
The idea is to extend labelled sequents with a preorder relation symbol in order to capture intuitionistic modal logics, that is to define intuitionistic labelled sequents from labelled formulas $x \colon A$, relational atoms $x$R$y$, and preorder atoms of the form $x \leq y$, where x, y range over a set of labels and A is an intuitionistic modal formula.

A two-sided intuitionistic labelled sequent would be of the form $\G, \Left \Rightarrow \Right$ where $\G$ denotes a set of relational and preorder atoms, and $\Left$ and $\Right$ are multiset of labelled formulas. 
%
We then obtain a proof system lab$\heartsuit$IK (\ref{fig:labHIK}) for intuitionistic modal logic in this formalism. \marianela{I can't put the figure 2 before this!!}
%
%As we mentioned, we obtain a proof system lab$\heartsuit$IK which allows us to give an extension of labelled deduction to the intuitionistic world and then we prove the next theorem:

\begin{theorem}
	\label{thm:sound-compl}
	A formula $A$ is provable in the calculus $\lab\heartsuit\IK$ if and only if $A$ is valid in every bi-relational frame.
\end{theorem}

\sonia{Rewrote the last two paragraphs more succinctly. Should we say more?}

On the one hand, we prove directly that each rule from our system is sound wrt.~bi-relational structures.
%
On the other hand, we show that $\lab\heartsuit\IK$ is complete wrt.~Simpson's $\lab\IK$, and the theorem then follows from Theorem~\ref{thm:simpson-sound-compl}. \marianela{Sonia, what do you think about mention your result of completeness with cut elimination?}

To show completeness wrt.~Simpson's $\lab\IK$ we obtain the proof for the next proposition:\marianela{I do not know if it is a good idea to add this but...}

\begin{proposition}
	\begin{enumerate}
		\item\label{StoM-seq} If there is a proof $\vlderivation{\vlhtr{\DD}{\G, \Left \SEQ \labels{z}{C}}}$ in $\lab\IK$ then there is a proof $\vlderivation{\vlhtr{\DD^\rn{m}}{\G, \Left \SEQ \labels{z}{C}}}$ in $\lab\heartsuit\IK$.
		
		\item\label{MtoS-seq} If there is a proof $\vlderivation{\vlhtr{\DD}{\G, \Left \SEQ \Right}}$ in $\lab\heartsuit\IK$ then there is a proof $\vlderivation{\vlhtr{\DD^\rn{s}}{\G, \Left \SEQ \labels{z}{C}}}$ in $\lab\IK$.
	\end{enumerate}
\end{proposition}

\vspace{2mm}

On the other hand, as part of the proof of Theorem~\ref{thm:simpson-sound-compl}, we obtain the proof for different lemmas such as:

\begin{lemma}\label{lem:weak}\hbox{}\quad
	\begin{enumerate}
		\item 
		If there exists a proof 
		$\vlderivation{\vlhtr{\DD}{\G, \Left \SEQ \Right, \labels{x}{\BOT}}}$ 
		then there exists a proof 
		$\vlderivation{\vlhtr{\DD^{\bm\BOT}}{\G, \Left \SEQ \Right}}$
		
		\item 
		If there exists a proof 
		$\vlderivation{\vlhtr{\DD}{\G, \Left, \labels{x}{\TOP} \SEQ \Right}}$ 
		then there exists a proof 
		$\vlderivation{\vlhtr{\DD^{\bm\TOP}}{\G, \Left \SEQ \Right}}$
		
		\item 
		If there exists a proof 
		$\vlderivation{\vlhtr{\DD}{\G, \Left \SEQ \Right}}$ 
		then there exists a proof 
		$\vlderivation{\vlhtr{\DD^{\rn w}}{\G, x \rel y, u \le v, \Left, \labels{z}{A} \SEQ \Right, \labels{w}{B}}}$
	\end{enumerate}
\end{lemma}

\begin{lemma}\label{lem:inv}\hbox{}\quad
	\begin{enumerate}
	\item
	If there exists a proof 
	$\vlderivation{\vlhtr{\DD}{\G, \Left, \labels{x}{A \IMP B} \SEQ \Right}}$ 
	then there exists a proof 
	$\vlderivation{\vlhtr{\DD^{\invr{\llabrn\IMP}}}{\G, \Left, \labels{y}{B} \SEQ \Right}}$
	of the same (or smaller) height, for any label $y$ that does not appear in $\DD$.
	
	\item
	If there exists a proof 
	$\vlderivation{\vlhtr{\DD}{\G, \Left \SEQ \Right, \labels{x}{A \IMP B}}}$ 
	then there exists a proof 
	$\vlderivation{\vlhtr{\DD^{\invr{\rlabrn\IMP}}}{\G, x \le y, \Left, \labels{y}{A} \SEQ \Right, \labels{y}{B}}}$
	of the same (or smaller) height, for any label $y$ that does not appear in $\DD$.
	
	\item 
	If there exists a proof 
	$\vlderivation{\vlhtr{\DD}{\G, \Left \SEQ \Right, \labels{x}{\BOX A}}}$ 
	then there exists a proof 
	$\vlderivation{\vlhtr{\DD^{\invr{\rlabrn\BOX}}}{\G, x \le u, u \rel v, \Left \SEQ \Right, \labels{v}{A}}}$
	of the same (or smaller) height, for any label $u$ and $v$ that do not appear in $\DD$.
	
	\item 
	If there exists a proof 
	$\vlderivation{\vlhtr{\DD}{\G, \Left, \labels{x}{\DIA A} \SEQ \Right}}$ 
	then there exists a proof 
	$\vlderivation{\vlhtr{\DD^{\invr{\llabrn\DIA}}}{\G, x \rel y, \Left, \labels{y}{A} \SEQ \Right}}$
	of the same (or smaller) height, for any label $y$ that does not appear in $\DD$.
	
	\end{enumerate}
\end{lemma}






%We show that each rule from our system is sound.
%
%We also present a syntactic completeness proof with respect the Hilbert system: we prove all Hilbert axioms using the rules from our system (i.e. proof of all propositional intuitionistic axioms, the five variants of k axiom from the intuitionistic syntax, simulate the necessitation rule and simulate modus ponens).
%
%We present a completeness proof for our system lab$\heartsuit$IK using the Simpson system. 
%
%The idea comes from knowing that the Simpson system is a Cut-free system, so this proof lets us know that our system is complete without the cut rule. 
%
%We show the proof by case analysis. 
%
%Most of the rules from Simpson system are the same as the rules in the system lab$\heartsuit$IK, then we prove for the rules that are different.




\begin{thebibliography}{4}
	\bibitem{Maffezioli}
	Paolo Maffezioli, Alberto Naibo, and Sara Negri. \emph{The Church-Fitch knowability paradox in the light of structural proof theory}. Synthese, 190(14):2677-2716, 2013. 
	
	%	\bibitem{Fitch}
	%	Frederic B Fitch. \emph{Tree proofs in modal logic}. Journal of Symbolic Logic, 31(1):152, 1966.
	
	\bibitem{Negri}
	Sara Negri. \emph{Proof analysis in modal logics}. Journal of Philosophical Logic, 34:507-544, 2005. 
	
	\bibitem{Simpson}
	Alex Simpson. \emph{The Proof Theory and Semantics of Intuitionistic Modal Logic}. PhD thesis, University of Edinburgh, 1994. 
	
	\bibitem{Vigano}
	Luca Vigan\`o. \emph{Labelled Non-Classical Logic}. Kluwer Academic Publisher, 2000. 
	
	%	\bibitem{Marin}
	%	Sonia Marin. \emph{Modal proof theory through a focused telescope}. PhD thesis, Université Paris-Saclay, 2017.
	
	\bibitem{Fischer}
	Gis\`ele Fischer-Servi.\emph{ Axiomatizations for some intuitionistic modal logics}. Rendiconti del Seminario Matematico dell’ Universit`a Politecnica di Torino, 42(3):179-194, 1984.
	
	\bibitem{Plotkin}
	Gordon D. Plotkin and Colin P. Stirling. \emph{A framework for intuitionistic modal logic}. In J. Y. Halpern, editor,1st Conference on Theoretical Aspects of Reasoning About Knowledge.
	Morgan Kaufmann, 1986.
	
	\bibitem{Ewald}
	W. B. Ewald. \emph{Intuitionistic tense and modal logic}. The Journal of Symbolic Logic, 51(1):166–179, 1986.

	\bibitem{Gabbay}
	Dov M. Gabbay. \emph{Labelled Deductive Systems}. Clarendon Press, 1996.

	%	\bibitem{kuz:str}
	%	Roman Kuznets and Lutz Stra{\ss}burger. \emph{Maehara-style Modal Nested Calculi}. Research report, Inria RR-9123, 2017.
	
	%	\bibitem{mar:str}
	%	Sonia Marin and Lutz Stra{\ss}burger. \emph{Label-free Modular Systems for Classical and Intuitionistic Modal Logics}. In Advances in Modal Logics, 2014.
	
\end{thebibliography}

%% Acknowledgments
%\begin{acks}                            %% acks environment is optional
%                                        %% contents suppressed with 'anonymous'
%  %% Commands \grantsponsor{<sponsorID>}{<name>}{<url>} and
%  %% \grantnum[<url>]{<sponsorID>}{<number>} should be used to
%  %% acknowledge financial support and will be used by metadata
%  %% extraction tools.
%  This material is based upon work supported by the
%  \grantsponsor{GS100000001}{National Science
%    Foundation}{http://dx.doi.org/10.13039/100000001} under Grant
%  No.~\grantnum{GS100000001}{nnnnnnn} and Grant
%  No.~\grantnum{GS100000001}{mmmmmmm}.  Any opinions, findings, and
%  conclusions or recommendations expressed in this material are those
%  of the author and do not necessarily reflect the views of the
%  National Science Foundation.
%\end{acks}


%% Bibliography
%\bibliography{bibfile}

%% Appendix
%\appendix
%\section{Appendix}
%
%Text of appendix \ldots

\end{document}
